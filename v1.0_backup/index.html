<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>İzmir İstinyepark Rolex</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@300;400;500;600&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Montserrat', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #FAFAFA 0%, #F5F5F0 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #2C2C2C;
        }

        .container {
            background: white;
            border-radius: 4px;
            padding: 40px;
            max-width: 650px;
            width: 100%;
            box-shadow: 0 2px 20px rgba(0,0,0,0.06);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 25px;
            border-bottom: 1px solid #E8E8E8;
        }

        .header h1 {
            font-family: 'Playfair Display', serif;
            font-weight: 300;
            font-size: 36px;
            letter-spacing: 4px;
            color: #1A1A2E;
            margin-bottom: 12px;
        }

        .rolex-logo {
            width: 50px;
            height: auto;
            margin: 0 auto 10px;
            display: block;
        }

        .header p {
            font-size: 12px;
            letter-spacing: 2px;
            text-transform: uppercase;
            color: #757575;
            font-weight: 300;
        }

        .section {
            margin-bottom: 35px;
        }

        .section-title {
            font-size: 11px;
            letter-spacing: 2px;
            text-transform: uppercase;
            color: #757575;
            margin-bottom: 18px;
            font-weight: 500;
        }

        /* Randevu Tipi Seçimi */
        .appointment-types {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .type-card {
            padding: 22px;
            background: #FAFAFA;
            border: 1px solid #E8E8E8;
            border-radius: 2px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .type-card:hover {
            background: white;
            border-color: #C9A55A;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(201, 165, 90, 0.15);
        }

        .type-card.selected {
            background: #1A1A2E;
            color: #FAFAFA;
            border-color: #1A1A2E;
        }

        .type-card h3 {
            font-size: 15px;
            letter-spacing: 1px;
            font-weight: 400;
            margin-bottom: 0;
        }

        /* Aylık Takvim */
        .calendar-container {
            background: #FAFAFA;
            border-radius: 2px;
            padding: 15px;
            border: 1px solid #E8E8E8;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .calendar-header h2 {
            font-family: 'Montserrat', sans-serif;
            color: #1A1A2E;
            font-size: 16px;
            font-weight: 500;
            letter-spacing: 1px;
        }

        .calendar-nav {
            display: flex;
            gap: 8px;
        }

        .nav-btn {
            padding: 6px 12px;
            background: white;
            border: 1px solid #E8E8E8;
            border-radius: 2px;
            cursor: pointer;
            font-size: 10px;
            letter-spacing: 0.5px;
            font-weight: 400;
            transition: all 0.3s ease;
            color: #2C2C2C;
        }

        .nav-btn:hover {
            background: #1A1A2E;
            color: #FAFAFA;
            border-color: #1A1A2E;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
        }

        .day-header {
            text-align: center;
            padding: 6px 2px;
            font-weight: 500;
            color: #757575;
            font-size: 9px;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            min-height: 26px;
            font-weight: 300;
        }

        .calendar-day.other-month {
            color: #E0E0E0;
            cursor: default;
        }

        .calendar-day.today {
            font-weight: 500;
            color: #C9A55A;
            border: 1px solid #C9A55A;
        }

        .calendar-day.available {
            background: white;
            border: 1px solid #C9A55A;
            color: #1A1A2E;
            font-weight: 400;
        }

        .calendar-day.available:hover {
            background: #C9A55A;
            color: white;
            transform: scale(1.05);
        }

        .calendar-day.unavailable {
            color: #BDBDBD;
            text-decoration: line-through;
            cursor: not-allowed;
        }

        .calendar-day.selected {
            background: #1A1A2E;
            color: white;
            font-weight: 500;
            border: 1px solid #1A1A2E;
        }

        .calendar-day.past {
            color: #E8E8E8;
            cursor: not-allowed;
        }

        /* Saat Slotları */
        .available-slots {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .slot-btn {
            padding: 14px;
            background: white;
            border: 1px solid #E8E8E8;
            border-radius: 2px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 13px;
            font-weight: 300;
            color: #2C2C2C;
            letter-spacing: 0.5px;
        }

        .slot-btn:hover {
            background: #FAFAFA;
            border-color: #C9A55A;
        }

        .slot-btn.selected {
            background: #1A1A2E;
            color: white;
            border-color: #1A1A2E;
            font-weight: 400;
        }

        .slot-btn.disabled {
            opacity: 0.3;
            cursor: not-allowed;
            background: #FAFAFA;
            text-decoration: line-through;
        }

        .slot-btn.disabled:hover {
            background: #FAFAFA;
            border-color: #E8E8E8;
        }

        .staff-select {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 12px;
            margin-top: 15px;
        }

        .staff-card {
            padding: 18px;
            background: #FAFAFA;
            border: 1px solid #E8E8E8;
            border-radius: 2px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .staff-card:hover {
            background: white;
            border-color: #C9A55A;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(201, 165, 90, 0.15);
        }

        .staff-card.selected {
            background: #1A1A2E;
            color: white;
            border-color: #1A1A2E;
        }

        .staff-card.unavailable {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .staff-name {
            font-weight: 400;
            font-size: 14px;
            color: #2C2C2C;
            letter-spacing: 0.5px;
        }

        .staff-card.selected .staff-name {
            color: white;
        }

        .staff-card.unavailable:hover {
            background: #f5f5f5;
            border-color: #e0e0e0;
        }

        .staff-name {
            font-weight: 600;
            font-size: 15px;
        }

        .input-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-size: 14px;
            font-weight: 500;
        }

        input, select, textarea {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #E8E8E8;
            border-radius: 2px;
            background: white;
            font-size: 15px;
            font-family: 'Montserrat', sans-serif;
            font-weight: 300;
            color: #2C2C2C;
            transition: all 0.3s ease;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #C9A55A;
            box-shadow: 0 0 0 3px rgba(201, 165, 90, 0.1);
        }

        textarea {
            resize: vertical;
            min-height: 80px;
        }

        label {
            font-size: 11px;
            letter-spacing: 2px;
            text-transform: uppercase;
            color: #757575;
            margin-bottom: 8px;
            display: block;
            font-weight: 500;
        }

        .btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .alert {
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-size: 14px;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .alert-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .alert-info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        .info-box {
            background: transparent;
            padding: 0;
            margin-bottom: 20px;
        }

        .info-box p {
            font-size: 13px;
            color: #757575;
            line-height: 1.6;
            text-align: center;
            font-weight: 300;
        }

        .loading {
            text-align: center;
            padding: 40px 20px;
        }

        .loading-error-container {
            text-align: center;
            padding: 60px 20px;
        }

        /* Apple-style spinner */
        .spinner {
            width: 40px;
            height: 40px;
            margin: 0 auto;
            border: 3px solid #E8E8E8;
            border-top-color: #C9A55A;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        .btn-spinner {
            display: inline-block;
            width: 14px;
            height: 14px;
            margin-right: 8px;
            border: 2px solid rgba(255,255,255,0.3);
            border-top-color: #FAFAFA;
            border-radius: 50%;
            animation: spin 0.6s linear infinite;
            vertical-align: middle;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Submit button */
        .btn {
            width: 100%;
            padding: 12px 30px;
            background: #1A1A2E;
            color: #FAFAFA;
            border: none;
            border-radius: 2px;
            font-size: 11px;
            letter-spacing: 2px;
            text-transform: uppercase;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Montserrat', sans-serif;
            margin-top: 20px;
        }

        .btn:hover {
            background: #2C2C3E;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(26, 26, 46, 0.3);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        /* Alert */
        .alert {
            padding: 15px 20px;
            border-radius: 2px;
            margin-bottom: 20px;
            font-size: 13px;
            line-height: 1.6;
            border-left: 3px solid;
        }

        .alert-success {
            background: #F0F7F4;
            color: #1A5D3A;
            border-color: #4A9B5F;
        }

        .alert-error {
            background: #FFF5F5;
            color: #8B1E1E;
            border-color: #C9555A;
        }

        .alert-info {
            background: #F4E4C1;
            color: #2C2C2C;
            border-color: #C9A55A;
        }

        /* Success Page Styles */
        .success-container {
            text-align: center;
            padding: 60px 20px;
        }

        .success-icon {
            font-size: 72px;
            color: #C9A55A;
            margin-bottom: 30px;
            line-height: 1;
        }

        .success-title {
            font-family: 'Playfair Display', serif;
            font-size: 28px;
            font-weight: 400;
            letter-spacing: 1px;
            color: #1A1A2E;
            margin-bottom: 20px;
        }

        .success-text {
            font-size: 14px;
            color: #757575;
            line-height: 1.8;
            font-weight: 300;
            margin-bottom: 40px;
        }

        .appointment-details {
            background: white;
            padding: 30px;
            border-radius: 2px;
            margin: 30px 0;
            border-left: 3px solid #C9A55A;
            text-align: left;
        }

        .details-header {
            font-family: 'Montserrat', sans-serif;
            font-size: 11px;
            letter-spacing: 2px;
            text-transform: uppercase;
            color: #757575;
            margin-bottom: 20px;
            font-weight: 300;
        }

        .detail-item {
            font-size: 15px;
            color: #2C2C2C;
            margin-bottom: 10px;
            font-weight: 400;
        }

        .detail-location {
            font-size: 13px;
            color: #757575;
            margin-top: 15px;
        }

        .btn-secondary {
            width: 100%;
            padding: 12px 30px;
            background: transparent;
            color: #1A1A2E;
            border: 2px solid #1A1A2E;
            border-radius: 2px;
            font-size: 11px;
            letter-spacing: 2px;
            text-transform: uppercase;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Montserrat', sans-serif;
        }

        .btn-secondary:hover {
            background: #1A1A2E;
            color: #FAFAFA;
        }

        /* Calendar Selection Modal */
        .calendar-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(26, 26, 46, 0.85);
            z-index: 9998;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(8px);
        }

        .calendar-modal.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        .calendar-modal-content {
            background: white;
            padding: 45px 40px;
            border-radius: 0;
            max-width: 420px;
            width: 90%;
            text-align: center;
            animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .calendar-modal-header {
            font-family: 'Playfair Display', serif;
            font-size: 24px;
            font-weight: 300;
            color: #1A1A2E;
            margin-bottom: 12px;
            letter-spacing: 1px;
        }

        .calendar-modal-subtitle {
            font-size: 13px;
            color: #757575;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .calendar-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 25px;
        }

        .calendar-option-btn {
            padding: 18px 24px;
            background: #FAFAFA;
            border: 2px solid #E8E8E8;
            border-radius: 2px;
            font-family: 'Montserrat', sans-serif;
            font-size: 12px;
            font-weight: 500;
            letter-spacing: 1.5px;
            text-transform: uppercase;
            color: #1A1A2E;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .calendar-option-btn:hover {
            background: white;
            border-color: #C9A55A;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(201, 165, 90, 0.15);
        }

        .modal-close-btn {
            padding: 12px 30px;
            background: transparent;
            color: #757575;
            border: none;
            font-size: 11px;
            letter-spacing: 2px;
            text-transform: uppercase;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .modal-close-btn:hover {
            color: #1A1A2E;
        }

        /* iOS Guide Modal */
        .guide-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(26, 26, 46, 0.85);
            z-index: 9999;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(8px);
        }

        .guide-modal.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        .guide-content {
            background: white;
            padding: 45px 40px;
            border-radius: 0;
            max-width: 380px;
            width: 90%;
            text-align: center;
            animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .guide-icon {
            font-size: 56px;
            margin-bottom: 25px;
        }

        .guide-title {
            font-family: 'Playfair Display', serif;
            font-size: 22px;
            font-weight: 400;
            color: #1A1A2E;
            margin-bottom: 15px;
            letter-spacing: 1px;
        }

        .guide-text {
            font-family: 'Montserrat', sans-serif;
            font-size: 13px;
            color: #666;
            margin-bottom: 30px;
            line-height: 1.7;
            letter-spacing: 0.3px;
        }

        .guide-btn {
            background: #1A1A2E;
            color: white;
            border: none;
            padding: 14px 40px;
            border-radius: 0;
            cursor: pointer;
            font-size: 11px;
            font-weight: 500;
            letter-spacing: 2px;
            text-transform: uppercase;
            font-family: 'Montserrat', sans-serif;
            transition: all 0.3s ease;
            border: 1px solid #1A1A2E;
        }

        .guide-btn:hover {
            background: white;
            color: #1A1A2E;
            box-shadow: 0 4px 15px rgba(26, 26, 46, 0.15);
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        /* Toast Notifications */
        .toast {
            position: fixed;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            background: #1A1A2E;
            color: white;
            padding: 16px 32px;
            border-radius: 0;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.25);
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 10000;
            animation: toastSlideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            font-family: 'Montserrat', sans-serif;
            font-size: 12px;
            letter-spacing: 0.5px;
            font-weight: 400;
        }

        .toast.success {
            border-left: 3px solid #C9A55A;
        }

        .toast.success::before {
            content: '✓';
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 20px;
            height: 20px;
            background: #C9A55A;
            color: white;
            border-radius: 50%;
            font-size: 12px;
            font-weight: bold;
        }

        @keyframes toastSlideUp {
            from {
                opacity: 0;
                transform: translate(-50%, 30px);
            }
            to {
                opacity: 1;
                transform: translate(-50%, 0);
            }
        }

        @keyframes fadeOut {
            to {
                opacity: 0;
                transform: translate(-50%, 10px);
            }
        }

        .toast.fade-out {
            animation: fadeOut 0.5s ease forwards;
        }

        @media (max-width: 600px) {
            body { padding: 10px; }
            .container { padding: 25px; max-width: 100%; }
            .header h1 { font-size: 28px; letter-spacing: 2px; }
            .header p { font-size: 10px; }
            .calendar-container { padding: 15px; }
            .calendar-header h2 { font-size: 16px; }
            .calendar-grid { gap: 4px; }
            .calendar-day { font-size: 11px; min-height: 28px; }
            .day-header { font-size: 9px; padding: 5px 2px; }
            .nav-btn { padding: 6px 10px; font-size: 11px; }
            .available-slots { grid-template-columns: repeat(auto-fill, minmax(80px, 1fr)); }
            .type-card { padding: 18px; }
            .btn { padding: 14px 30px; font-size: 11px; letter-spacing: 2px; }
            .success-icon { font-size: 56px; }
            .success-title { font-size: 22px; }
            .calendar-modal-content { padding: 30px 25px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <svg class="rolex-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 456.6 494.7" alt="">
                                <linearGradient id="a" x1="35.557" x2="461.064" y1="183.426" y2="330.853" gradientUnits="userSpaceOnUse">
                                    <stop offset="0" stop-color="#f9f4eb"></stop>
                                    <stop offset="0.089" stop-color="#f8f2e7"></stop>
                                    <stop offset="0.17" stop-color="#f6ecdd"></stop>
                                    <stop offset="0.248" stop-color="#f3e3cd"></stop>
                                    <stop offset="0.324" stop-color="#efd6b5"></stop>
                                    <stop offset="0.338" stop-color="#edd3b0"></stop>
                                    <stop offset="0.42" stop-color="#eccfa9"></stop>
                                    <stop offset="0.48" stop-color="#ebcaa0"></stop>
                                    <stop offset="0.703" stop-color="#e1bc8b"></stop>
                                    <stop offset="0.81" stop-color="#dcb480"></stop>
                                    <stop offset="0.844" stop-color="#ca9e70"></stop>
                                    <stop offset="0.893" stop-color="#b98960"></stop>
                                    <stop offset="0.944" stop-color="#af7d57"></stop>
                                    <stop offset="1" stop-color="#ac7954"></stop>
                                </linearGradient>
                                <linearGradient id="b" x1="-8.035" x2="430.509" y1="206.645" y2="284.926" gradientUnits="userSpaceOnUse">
                                    <stop offset="0" stop-color="#e8c798"></stop>
                                    <stop offset="0.139" stop-color="#e8c89b"></stop>
                                    <stop offset="0.241" stop-color="#ebcda4"></stop>
                                    <stop offset="0.316" stop-color="#edd3b0"></stop>
                                    <stop offset="0.399" stop-color="#ecd0a9"></stop>
                                    <stop offset="0.482" stop-color="#e9ca9d"></stop>
                                    <stop offset="0.757" stop-color="#e7c89a"></stop>
                                    <stop offset="0.769" stop-color="#c8a77f"></stop>
                                    <stop offset="0.79" stop-color="#a07e5e"></stop>
                                    <stop offset="0.811" stop-color="#816046"></stop>
                                    <stop offset="0.832" stop-color="#6a4b35"></stop>
                                    <stop offset="0.854" stop-color="#5c3d2b"></stop>
                                    <stop offset="0.877" stop-color="#533624"></stop>
                                    <stop offset="0.901" stop-color="#503322"></stop>
                                </linearGradient>
                                <linearGradient id="c" x1="111.356" x2="409.373" y1="206.84" y2="311.671" gradientUnits="userSpaceOnUse">
                                    <stop offset="0.12" stop-color="#f3dfbd"></stop>
                                    <stop offset="0.257" stop-color="#f0dbb9"></stop>
                                    <stop offset="0.382" stop-color="#e7cfac"></stop>
                                    <stop offset="0.503" stop-color="#d9ba96"></stop>
                                    <stop offset="0.62" stop-color="#c69f7a"></stop>
                                    <stop offset="0.691" stop-color="#b98b67"></stop>
                                </linearGradient>
                                <linearGradient id="d" x1="-7.272" x2="431.272" y1="205.232" y2="283.513" gradientUnits="userSpaceOnUse">
                                    <stop offset="0" stop-color="#e8c798"></stop>
                                    <stop offset="0.139" stop-color="#e8c89b"></stop>
                                    <stop offset="0.241" stop-color="#ebcda4"></stop>
                                    <stop offset="0.316" stop-color="#edd3b0"></stop>
                                    <stop offset="0.399" stop-color="#ecd0a9"></stop>
                                    <stop offset="0.482" stop-color="#e9ca9d"></stop>
                                    <stop offset="0.714" stop-color="#e7c89a"></stop>
                                    <stop offset="0.749" stop-color="#efd8b7"></stop>
                                    <stop offset="0.784" stop-color="#f5e5cf"></stop>
                                    <stop offset="0.821" stop-color="#faefe0"></stop>
                                    <stop offset="0.86" stop-color="#fdf5ea"></stop>
                                    <stop offset="0.901" stop-color="#fef7ee"></stop>
                                </linearGradient>
                                <linearGradient id="e" x1="229.976" x2="209.978" y1="118.482" y2="537.763" gradientUnits="userSpaceOnUse">
                                    <stop offset="0.581" stop-color="#fcfbe9" stop-opacity="0"></stop>
                                    <stop offset="0.628" stop-color="#eee6d0" stop-opacity="0.181"></stop>
                                    <stop offset="0.725" stop-color="#ccb592" stop-opacity="0.554"></stop>
                                    <stop offset="0.842" stop-color="#a37b4c"></stop>
                                    <stop offset="0.843" stop-color="#9e764b"></stop>
                                    <stop offset="0.858" stop-color="#6e543e"></stop>
                                    <stop offset="0.873" stop-color="#4a3a31"></stop>
                                    <stop offset="0.889" stop-color="#2f2624"></stop>
                                    <stop offset="0.904" stop-color="#1c1718"></stop>
                                    <stop offset="0.92" stop-color="#0f0c0d"></stop>
                                    <stop offset="0.937" stop-color="#070506"></stop>
                                    <stop offset="0.955" stop-color="#050304"></stop>
                                </linearGradient>
                                <linearGradient id="f" x1="-8.035" x2="430.509" y1="206.645" y2="284.926" gradientUnits="userSpaceOnUse">
                                    <stop offset="0" stop-color="#e8c798"></stop>
                                    <stop offset="0.102" stop-color="#e8c89b"></stop>
                                    <stop offset="0.178" stop-color="#ebcda4"></stop>
                                    <stop offset="0.234" stop-color="#edd3b0"></stop>
                                    <stop offset="0.357" stop-color="#ecd0a9"></stop>
                                    <stop offset="0.482" stop-color="#e9ca9d"></stop>
                                    <stop offset="0.796" stop-color="#e7c89a"></stop>
                                    <stop offset="0.888" stop-color="#967456"></stop>
                                    <stop offset="0.964" stop-color="#62432f"></stop>
                                    <stop offset="1" stop-color="#503322"></stop>
                                </linearGradient>
                                <linearGradient id="g" x1="392.616" x2="25.121" y1="181.809" y2="331.512" gradientUnits="userSpaceOnUse">
                                    <stop offset="0.803" stop-color="#fcfbe9" stop-opacity="0"></stop>
                                    <stop offset="0.812" stop-color="#eee6d0" stop-opacity="0.181"></stop>
                                    <stop offset="0.831" stop-color="#ccb592" stop-opacity="0.554"></stop>
                                    <stop offset="0.854" stop-color="#a37b4c"></stop>
                                    <stop offset="0.855" stop-color="#9e764b"></stop>
                                    <stop offset="0.868" stop-color="#6e543e"></stop>
                                    <stop offset="0.882" stop-color="#4a3a31"></stop>
                                    <stop offset="0.896" stop-color="#2f2624"></stop>
                                    <stop offset="0.91" stop-color="#1c1718"></stop>
                                    <stop offset="0.924" stop-color="#0f0c0d"></stop>
                                    <stop offset="0.939" stop-color="#070506"></stop>
                                    <stop offset="0.955" stop-color="#050304"></stop>
                                </linearGradient>
                                <radialGradient id="h" cx="30.8" cy="146.5" r="32.89" fx="23.585" fy="166.478" gradientUnits="userSpaceOnUse">
                                    <stop offset="0" stop-color="#fffefa"></stop>
                                    <stop offset="0.248" stop-color="#fefdf8"></stop>
                                    <stop offset="0.433" stop-color="#fefbf1"></stop>
                                    <stop offset="0.452" stop-color="#fdfaf0"></stop>
                                    <stop offset="0.513" stop-color="#f6efe2" stop-opacity="0.866"></stop>
                                    <stop offset="0.62" stop-color="#e4d2be" stop-opacity="0.627"></stop>
                                    <stop offset="0.76" stop-color="#c8a789" stop-opacity="0.314"></stop>
                                    <stop offset="0.901" stop-color="#ac7954" stop-opacity="0"></stop>
                                </radialGradient>
                                <radialGradient id="i" cx="234.59" cy="322.848" r="32.855" fx="237.449" fy="343.873" gradientTransform="matrix(-.8158 .8158 -.8937 -.8937 599.003 165.7)" gradientUnits="userSpaceOnUse">
                                    <stop offset="0" stop-color="#fffefa"></stop>
                                    <stop offset="0.192" stop-color="#fefdf7"></stop>
                                    <stop offset="0.353" stop-color="#fdfaf0"></stop>
                                    <stop offset="0.393" stop-color="#fcf6e9"></stop>
                                    <stop offset="0.451" stop-color="#f7ead6"></stop>
                                    <stop offset="0.52" stop-color="#efd7b8"></stop>
                                    <stop offset="0.544" stop-color="#ecd0ac"></stop>
                                    <stop offset="0.797" stop-color="#714d38"></stop>
                                </radialGradient>
                                <radialGradient id="j" cx="-357.837" cy="226.244" r="36.766" fx="-352.883" fy="247.148" gradientTransform="matrix(-1.1203 0 0 -1.2159 -173.585 310.377)" gradientUnits="userSpaceOnUse">
                                    <stop offset="0" stop-color="#fffefa"></stop>
                                    <stop offset="0.132" stop-color="#fefdf7"></stop>
                                    <stop offset="0.242" stop-color="#fdfaf0"></stop>
                                    <stop offset="0.303" stop-color="#fcf6e9"></stop>
                                    <stop offset="0.392" stop-color="#f7ead6"></stop>
                                    <stop offset="0.497" stop-color="#efd7b8"></stop>
                                    <stop offset="0.532" stop-color="#ecd0ac"></stop>
                                    <stop offset="0.677" stop-color="#835d48"></stop>
                                    <stop offset="0.95" stop-color="#8c5c3d"></stop>
                                </radialGradient>
                                <radialGradient id="k" cx="-333.529" cy="415.262" r="41.056" fx="-340.736" fy="440.547" gradientTransform="matrix(-1.2082 -.2093 .2174 -1.2545 -158.298 521.438)" gradientUnits="userSpaceOnUse">
                                    <stop offset="0.031" stop-color="#fffefa"></stop>
                                    <stop offset="0.095" stop-color="#fcf9f3"></stop>
                                    <stop offset="0.188" stop-color="#f4eadf"></stop>
                                    <stop offset="0.3" stop-color="#e7d4bf"></stop>
                                    <stop offset="0.425" stop-color="#d6b594"></stop>
                                    <stop offset="0.44" stop-color="#d4b18e"></stop>
                                    <stop offset="0.57" stop-color="#d7b694"></stop>
                                    <stop offset="0.747" stop-color="#6d422f"></stop>
                                </radialGradient>
                                <radialGradient id="l" cx="-277.091" cy="427.103" r="41.094" fx="-287.076" fy="451.452" gradientTransform="matrix(-1.1863 -.2055 .2055 -1.1863 6.443 599.36)" gradientUnits="userSpaceOnUse">
                                    <stop offset="0.044" stop-color="#fdf6e0"></stop>
                                    <stop offset="0.112" stop-color="#fbf1d9"></stop>
                                    <stop offset="0.211" stop-color="#f4e3c5"></stop>
                                    <stop offset="0.329" stop-color="#eacea5"></stop>
                                    <stop offset="0.389" stop-color="#e4c092"></stop>
                                    <stop offset="0.632" stop-color="#8c5c3d"></stop>
                                    <stop offset="0.67" stop-color="#372623"></stop>
                                </radialGradient>
                                <path fill="url(#a)" stroke="url(#b)" stroke-miterlimit="10" d="M416.4 119.7s-20.2 1.8-24 26.7c0 0 0 13 5.9 21.6l2.2 3.1s1 1.4-.6 5.1l-73.7 171.2-2.4 4.1s-2.6 4.1-9.6 1.4c0 0-6.1-2.4-4.7-13.4l20.2-146.6 13-87.7s.7-3.4 3.4-4.2c.7-.2 1.4-.5 2.1-1 4.3-2.6 16.9-11.8 17.5-27.7 0 0 3-16.9-11.6-27.5-10.4-7.6-24.4-8.5-35.4-1.9-6.4 3.8-12.3 10.4-13.7 22 0 0-3.1 13.2 4.5 24.4 0 0 5.3 6.3 6.7 7.3 0 0 1.6 1.4 1.2 3.1l-44.2 207.6s-3.1 12.6-13.4 12.8c0 0-7.1 1.4-8.5-10.6l-6.1-129.9-5.5-112.1s.6-5.5 4.7-7.9c0 0 15.5-11.8 10.8-30.7 0 0-4.7-29.3-37.9-23.4 0 0-24.6 7.3-17.5 40.7 0 0 2.4 9.4 11.4 14.9 0 0 5.5 2.4 5.5 9.6L208.2 307s.8 13.8-12.2 14.7c0 0-7.7.8-12.4-23.2L138.1 105s-2.5-11.2 3-16.1c0 0 17.6-22.9-2.4-44.4 0 0-16.7-16.3-38.7-1.2 0 0-15.7 9.8-9.4 35.6 0 0 1.5 10.7 15.2 18.1 0 0 7.9 2.6 8.5 9.5l27.9 186.1s5.7 42.5 4.3 50.9c0 0 .8 7.5-7.3 9.8 0 0-6.1 1.4-12.8-15.5L57.3 179.9s-4.3-10.8 0-15.7c0 0 16.3-26.1-8.6-41.3 0 0-17.9-12.2-36.2 3.7 0 0-20.2 18.3 0 41.3 0 0 4.7 6.3 16.1 9.2 0 0 6.7.2 7.7 7.5l58.6 170.2 32.6 95.5s3.2 11.6 5.1 13.2c0 0 5.3 5.7 23.2 11.4 0 0 41.9 20.8 94.9 14.4 0 0 35.2-3.3 67.4-18.7l5.1-2.9s2.6-1 4.7-9.4l33-98.1 35.8-100.3 21-61.5 4.3-10.6s2.4-6.5 9.6-8.1c0 0 22.2-4.1 22-31.3.2 0-1.6-33.2-37.2-28.7zm-160 335.8s-55.4 9.2-87.3-11.2c0 0-15.1-7.9-10.2-27.7 0 0 3.6-9.3 17.3-14.2 0 0 22.4-13 78-7.7 0 0 44.6 5.1 44.8 28.5.1.1 7.9 24.6-42.6 32.3z"></path>
                                <path fill="url(#c)" stroke="url(#d)" stroke-miterlimit="10" d="M417.23 117.913s-20.2 1.8-24 26.7c0 0 0 13 5.9 21.6l2.2 3.1s1 1.4-.6 5.1l-73.7 171.2-2.4 4.1s-2.6 4.1-9.6 1.4c0 0-6.1-2.4-4.7-13.4l20.2-146.6 13-87.7s.7-3.4 3.4-4.2c.7-.2 3-1.6 3.7-2 4.3-2.6 15.4-10.8 15.9-26.7 0 0 3-16.9-11.6-27.5-10.4-7.6-24.4-8.5-35.4-1.9-6.4 3.8-12.3 10.4-13.7 22 0 0-3.1 13.2 4.5 24.4 0 0 5.3 6.3 6.7 7.3 0 0 1.6 1.4 1.2 3.1l-44.2 207.6s-3.1 12.6-13.4 12.8c0 0-7.1 1.4-8.5-10.6l-6.1-129.9-5.5-112.1s.6-5.5 4.7-7.9c0 0 15.5-11.8 10.8-30.7 0 0-3.8-28.3-37-22.4 0 0-24.7 6.2-17.6 39.6 0 0 3.4 6.8 11.3 13.6 0 0 4.8 3.8 4.8 11.1l-8.5 236.3s.8 13.8-12.2 14.7c0 0-7.7.8-12.4-23.2l-45.5-193.6s-2.5-11.2 3-16.1c0 0 17.6-22.9-2.4-44.4 0 0-16.7-16.3-38.7-1.2 0 0-15.7 9.8-9.4 35.6 0 0 1.5 10.7 15.2 18.1 0 0 7.9 2.6 8.5 9.5l27.9 186.1s5.7 42.5 4.3 50.9c0 0 .8 7.5-7.3 9.8 0 0-6.1 1.4-12.8-15.5l-69.1-157.9s-4.3-10.8 0-15.7c0 0 16.3-26.1-8.6-41.3 0 0-17.9-12.2-36.2 3.7 0 0-20.2 18.3 0 41.3 0 0 4.7 6.3 16.1 9.2 0 0 6.7.2 7.7 7.5l58.6 170.2 32.6 95.5s3.2 11.6 5.1 13.2c0 0 5.3 5.7 23.2 11.4 0 0 41.9 20.8 94.9 14.4 0 0 35.2-3.3 67.4-18.7l5.1-2.9s2.6-1 4.7-9.4l33-98.1 35.8-100.3 21-61.5 4.3-10.6s2.4-6.5 9.6-8.1c0 0 22.2-4.1 22-31.3.2 0-1.6-33.2-37.2-28.7zm-160 335.8s-55.4 9.2-87.3-11.2c0 0-15.1-7.9-10.2-27.7 0 0 3.6-9.3 17.3-14.2 0 0 22.4-13 78-7.7 0 0 44.6 5.1 44.8 28.5.1.1 7.9 24.6-42.6 32.3z"></path>
                                <path fill="url(#e)" stroke="url(#f)" stroke-miterlimit="10" d="M416.4 119.7s-20.2 1.8-24 26.7c0 0 0 13 5.9 21.6l2.2 3.1s1 1.4-.6 5.1l-73.7 171.2-2.4 4.1s-2.6 4.1-9.6 1.4c0 0-6.1-2.4-4.7-13.4l20.2-146.6 13-87.7s.7-3.4 3.4-4.2c.7-.2 1.4-.5 2.1-1 4.3-2.6 16.9-11.8 17.5-27.7 0 0 3-16.9-11.6-27.5-10.4-7.6-24.4-8.5-35.4-1.9-6.4 3.8-12.3 10.4-13.7 22 0 0-3.1 13.2 4.5 24.4 0 0 5.3 6.3 6.7 7.3 0 0 1.6 1.4 1.2 3.1l-44.2 207.6s-3.1 12.6-13.4 12.8c0 0-7.1 1.4-8.5-10.6l-6.1-129.9-5.5-112.1s.6-5.5 4.7-7.9c0 0 15.5-11.8 10.8-30.7 0 0-4.7-29.3-37.9-23.4 0 0-24.6 7.3-17.5 40.7 0 0 2.4 9.4 11.4 14.9 0 0 5.5 2.4 5.5 9.6L208.2 307s.8 13.8-12.2 14.7c0 0-7.7.8-12.4-23.2L138.1 105s-2.5-11.2 3-16.1c0 0 17.6-22.9-2.4-44.4 0 0-16.7-16.3-38.7-1.2 0 0-15.7 9.8-9.4 35.6 0 0 1.5 10.7 15.2 18.1 0 0 7.9 2.6 8.5 9.5l27.9 186.1s5.7 42.5 4.3 50.9c0 0 .8 7.5-7.3 9.8 0 0-6.1 1.4-12.8-15.5L57.3 179.9s-4.3-10.8 0-15.7c0 0 16.3-26.1-8.6-41.3 0 0-17.9-12.2-36.2 3.7 0 0-20.2 18.3 0 41.3 0 0 4.7 6.3 16.1 9.2 0 0 6.7.2 7.7 7.5l58.6 170.2 32.6 95.5s3.2 11.6 5.1 13.2c0 0 5.3 5.7 23.2 11.4 0 0 41.9 20.8 94.9 14.4 0 0 35.2-3.3 67.4-18.7l5.1-2.9s2.6-1 4.7-9.4l33-98.1 35.8-100.3 21-61.5 4.3-10.6s2.4-6.5 9.6-8.1c0 0 22.2-4.1 22-31.3.2 0-1.6-33.2-37.2-28.7zm-160 335.8s-55.4 9.2-87.3-11.2c0 0-15.1-7.9-10.2-27.7 0 0 3.6-9.3 17.3-14.2 0 0 22.4-13 78-7.7 0 0 44.6 5.1 44.8 28.5.1.1 7.9 24.6-42.6 32.3z"></path>
                                <path fill="url(#g)" stroke="url(#f)" stroke-miterlimit="10" d="M416.4 119.7s-20.2 1.8-24 26.7c0 0 0 13 5.9 21.6l2.2 3.1s1 1.4-.6 5.1l-73.7 171.2-2.4 4.1s-2.6 4.1-9.6 1.4c0 0-6.1-2.4-4.7-13.4l20.2-146.6 13-87.7s.7-3.4 3.4-4.2c.7-.2 1.4-.5 2.1-1 4.3-2.6 16.9-11.8 17.5-27.7 0 0 3-16.9-11.6-27.5-10.4-7.6-24.4-8.5-35.4-1.9-6.4 3.8-12.3 10.4-13.7 22 0 0-3.1 13.2 4.5 24.4 0 0 5.3 6.3 6.7 7.3 0 0 1.6 1.4 1.2 3.1l-44.2 207.6s-3.1 12.6-13.4 12.8c0 0-7.1 1.4-8.5-10.6l-6.1-129.9-5.5-112.1s.6-5.5 4.7-7.9c0 0 15.5-11.8 10.8-30.7 0 0-4.7-29.3-37.9-23.4 0 0-24.6 7.3-17.5 40.7 0 0 2.4 9.4 11.4 14.9 0 0 5.5 2.4 5.5 9.6L208.2 307s.8 13.8-12.2 14.7c0 0-7.7.8-12.4-23.2L138.1 105s-2.5-11.2 3-16.1c0 0 17.6-22.9-2.4-44.4 0 0-16.7-16.3-38.7-1.2 0 0-15.7 9.8-9.4 35.6 0 0 1.5 10.7 15.2 18.1 0 0 7.9 2.6 8.5 9.5l27.9 186.1s5.7 42.5 4.3 50.9c0 0 .8 7.5-7.3 9.8 0 0-6.1 1.4-12.8-15.5L57.3 179.9s-4.3-10.8 0-15.7c0 0 16.3-26.1-8.6-41.3 0 0-17.9-12.2-36.2 3.7 0 0-20.2 18.3 0 41.3 0 0 4.7 6.3 16.1 9.2 0 0 6.7.2 7.7 7.5l58.6 170.2 32.6 95.5s3.2 11.6 5.1 13.2c0 0 5.3 5.7 23.2 11.4 0 0 41.9 20.8 94.9 14.4 0 0 35.2-3.3 67.4-18.7l5.1-2.9s2.6-1 4.7-9.4l33-98.1 35.8-100.3 21-61.5 4.3-10.6s2.4-6.5 9.6-8.1c0 0 22.2-4.1 22-31.3.2 0-1.6-33.2-37.2-28.7zm-160 335.8s-55.4 9.2-87.3-11.2c0 0-15.1-7.9-10.2-27.7 0 0 3.6-9.3 17.3-14.2 0 0 23.474-14.622 79.202-8.184 0 0 43.398 5.584 43.598 28.984.1.1 7.9 24.6-42.6 32.3z"></path>
                                <circle cx="30.8" cy="146.5" r="26.8" fill="url(#h)"></circle>
                                <path fill="url(#i)" d="M99.1 90.2C86.5 78.1 86.6 56.9 98 45.8c11.2-10.9 29.8-10.2 41.9 1.9s14.7 26.9 1.9 41.9c-10.2 11.8-30.4 12.4-42.7.6z"></path>
                                <path fill="url(#j)" d="M199.2 34.7c0-16.5 12.9-29.7 28.1-29.7s28.1 13.5 28.1 30-7.9 30.7-28.1 30.7c-15.2-.1-28.1-13.3-28.1-31z"></path>
                                <path fill="url(#k)" d="M304.8 65.1c3-17.3 18.9-29 35.6-26.1 16.6 2.9 27.7 19.2 24.7 36.5s-17.2 29.3-35.6 26.1c-16.6-3-27.9-17.8-24.7-36.5z"></path>
                                <path fill="url(#l)" d="M393.3 144.5c.4-16.7 18.5-27.4 34.9-24.6s27.4 18.5 24.6 34.9-14.5 28.1-34.9 24.6c-16.4-2.7-25-14-24.6-34.9z"></path>
                                <g fill="#140a06">
                                    <path d="M133.6 354.8s-11.4-21.5-17.5-37l-27.3-61.5L64 197.8s-10-21.4-12.1-28.9c0 0-1.3-4.9 2.5-12.1 0 0 9.1-12.4 3.1-20.9 0 0 1.6 6.2-2.8 12.8 0 0-7.2 11.2-7.5 15.5 0 0-.4 7.1 5.3 15.8 0 0 7.1 12.2 8.6 16.2 0 0 57.9 133.4 58.2 134.2.3.7 9.1 21.3 14.3 24.4zM139.5 147.1s25.8 101.3 27.4 105.3c0 0 13.5 53.5 16.1 59.3 0 0 4.4 5.4 8.8 8 0 0-4.9-6.1-7-15.6l-16.1-68.9-21.8-86.5s-10.8-41.4-11.1-50.2c0 0-.7-4.5 2.8-10l4.6-5.9c.5-.6.9-1.2 1.2-1.9 1-1.8 3-5.5 3.7-8.5 0 0 2-14.1-6.3-14.1 0 0-.3 7.7-4.6 14.3 0 0-6.2 9.6-8.9 15.3-.9 2-1.3 4.1-1.2 6.3.2 2.8 1.5 5.8 2.4 10.8.1 0 7.9 28.9 10 42.3zM229.5 78.8l3.3 79.2 4.5 92.6L243 308c1.2 12.4 8.3 10.9 8.3 10.9-6.6-2.8-6-22.7-6-22.7l-5.9-109.7-6-120c0-1 0-1.9.2-2.9 1.1-6.1 3.3-8.4 3.3-8.4 6-10.6 10.9-11.1 12.5-10.9 1.1.1 4.8.7 5.4-.3 1.1-1.7 1.5-8.2 1.5-8.2-1.4-6.3-5.9-7.8-5.9-7.8.4 1.4-5.9 8.5-5.9 8.5l-12 13.8c-3.3 4.3-3.1 10-3.1 10z"></path>
                                    <path d="M239.3 66c-.4.6-.6 1.2-.8 1.9-.3 1.6-.9 4.9-.6 7.5l5.5 119.9 6.3 118.3s.7 4.5 6.7 6.2c0 0-5.9-2.6-5.3-16l-5.2-116.2L240.2 76s-1.1-7.4 1.3-13.3zM314.2 353.1s-4.9-2.9-4.9-10.5l6.1-84.9 12.8-95.5 7.1-59.8s-.7-5.2 3.9-9.4c.6-.6 3.7-4.5 4.2-5.1 1.7-2.3 4.9-3.5 9.7-7.6l6.9-4.6c1.5-.7 3.9 2.8 3.9 1.2.1-3.1-1.1-7.3-3.3-10.2L357 61s-11.1 8.2-14.2 10.6c0 0-12.4 12-15.3 22.9 0 0-2 12.2-2.7 20.2l-13.5 102.1S295.4 323.5 299 344.2c0 0 3.2 16.7 15.2 8.9z"></path>
                                    <path d="M447 142.3s-4.9-7-11.4-9c-1-.3-2.1 0-2.8.6-1.7 1.4-4.7 3.9-6.8 5.6-.8.6-1.7 1.2-2.6 1.7-2.8 1.4-10.8 6.3-17.5 17.9-.4.6-.6 1.3-.7 2.1-.2 2.2-.7 7.1-.8 9.7 0 .7 0 1.3.2 2 .3 1.2.6 4.1-1.3 7.6l-44.4 104.8-26.9 65s-7.3 17.8-21.3 30c0 0-5.6 4.7-20.9 1.8 0 0-60.4-9.5-92.6-4.9 0 0-34.6 2.4-44.2 26.6 0 0-6.4 13.1-1.6 32.2 0 0 3.3 16.4 2.4 22.4 0 0 3.3 7.3 9.1 10.4l2.2 1.8s-15.3-.7-33.5-14.4c0 0 6.4 9.8 22 14.2 0 0 24 9.3 37.7 11.5 0 0-26.9-12-31.8-20.9 0 0 0-2.2 2.9-1.6 0 0 9.5 4.5 45.5 5 0 0 34.9.6 59.6-6.9 0 0 34.8-7.8 40.4-34 0 0 9.8-36.6 19.3-52 0 0 24.2-52.2 32.9-74.8l34.9-87.4s10.2-27 11.1-29c0 0 2.9-11.5 7.5-17.8 0 0 6.3-8.8 10.5-12.4 1.1-.9 2.3-1.6 3.7-1.8 1.6-.3 4.2-.6 6.4.5 0 0 11.5 4.7 15.8 4.2.1.1 2.6-2.3-3-10.7zM301.4 425.5s.5 14.7-20.3 23.3c0 0-20.9 14.3-77.3 8.7 0 0-41.7.2-47.6-21.5 0 0-4.054-13.133 5.25-28.42 0 0 12.113-15.76 54.313-17.56 0 0 52.294-2.525 77.395 15.775 0-.001 10.058 7.397 8.242 19.705z"></path>
                                    <path d="M291.2 404.1c-9.1-7.1-18.124-11.522-18.124-11.522-30.9-6-60.837-4.316-60.837-4.316C167.339 391.362 159 410.9 159 410.9l.774-5.51c-3.402 1.686-2.416 13.034-1.263 14.712 1.426-3.967.705-5.328 4.329-8.875 6.625-6.484 11.734-7.626 14.795-8.919 6.878-2.905 14.116-4.767 20.569-5.961 11.525-2.132 20.547-2.132 20.547-2.132 20.134-.483 31.591.574 37.116 1.302 2.827.372 12.068 2.64 13.256 2.977 36.093 10.233 29.907 28.93 29.907 28.93 3.721-17.952-7.83-23.324-7.83-23.324z"></path>
                                </g>
                                <path fill="#7b4f36" d="M8.8 163.6s4.4 7.7 13.8 11.4c0 0 3.7 1.5 7.3 2.4 0 0 4.1.5 6 3.6l16.5 46.4 23.5 67.9 46 133.6 8.4 24.1 2.1 6.6s1.1 3.5 3.6 4.6c0 0 16.1 10.7 41.7 17.3 0 0 18.6 7.4 50.6 8.6 0 0 36.1 1.1 60.2-9 0 0 17.7-6.7 25.6-11.1 0 0-6.3 6-34.2 15.5 0 0-31 9.4-67.3 5.9 0 0-41.1-4.8-77.7-24.7 0 0-2.9-.5-5.8-10.1L114 411.9l-14.3-42.7L76 300.5l-20.9-61.3-19.1-55s-1.4-4.6-5.5-4.9c-.4 0-.7-.1-1.1-.1-3-.8-17.2-4.8-20.6-15.6z"></path>
                                <path fill="#684c34" d="M190.4 479.8s59.3 13.6 114.1-11.1l9.5-4.2s-18.1 16.4-72.6 21.2c-.1 0-31.2 1.4-51-5.9z"></path>
                                <path fill="#79593a" d="M150.9 420.9s2.1-18.3 10.1-25.7c0 0 7.3-10.7 43.3-14.9 0 0 40.7-5.1 78.3 8.6 0 0 11.9 4.5 16.9 14.8 0 0-7.8-17.6-57.2-21 0 0-27.4-2.1-52.4 3-3.5.7-6.9 1.5-10.4 2.2-5.586 2.002-24.1 5.6-28.6 33z"></path>
                            </svg>
            <h2 style="margin: 20px 0 2px; font-size: 14px; font-weight: normal; letter-spacing: 1px; text-align: center; color: #757575; font-family: 'Montserrat', sans-serif;">Rolex İzmir İstinyepark</h2>
            <p id="staffHeader" style="margin: 5px 0 0; font-size: 12px; color: #666; text-align: center; visibility: hidden; font-family: 'Montserrat', sans-serif; text-transform: capitalize;">-</p>
        </div>

        <div id="alertContainer"></div>

        <!-- Randevu Tipi Seçimi -->
        <div class="section">
            <div class="appointment-types">
                <div class="type-card" data-type="delivery" onclick="selectAppointmentType('delivery')">
                    <h3>Teslim Randevusu</h3>
                </div>
                <div class="type-card" data-type="meeting" onclick="selectAppointmentType('meeting')">
                    <h3>Görüşme Randevusu</h3>
                </div>
            </div>
        </div>

        <!-- Aylık Takvim -->
        <div class="section" id="calendarSection" style="display: none;">
            <div class="calendar-container">
                <div class="calendar-header">
                    <h2 id="currentMonth"></h2>
                    <div class="calendar-nav">
                        <button class="nav-btn" onclick="changeMonth(-1)">◀ Önceki</button>
                        <button class="nav-btn" onclick="changeMonth(1)">Sonraki ▶</button>
                    </div>
                </div>
                <div class="calendar-grid" id="calendarGrid"></div>
            </div>
        </div>

        <div class="section" id="staffSection" style="display: none;">
            <div class="section-title">Çalışan Seçiniz</div>
            <div id="staffLoading" class="loading" style="display: none;"><div class="spinner"></div></div>
            <div class="staff-select" id="staffList"></div>
        </div>

        <div class="section" id="timeSection" style="display: none;">
            <div class="available-slots" id="timeSlots"></div>
        </div>

        <div class="section" id="detailsSection" style="display: none;">
            <div class="section-title">İletişim bilgileriniz</div>
            <div class="input-group">
                <label for="customerName">Adınız soyadınız *</label>
                <input type="text" id="customerName" placeholder="Örn: Ahmet Yılmaz" required>
            </div>
            <div class="input-group">
                <label for="customerPhone">Telefon *</label>
                <input type="tel" id="customerPhone" placeholder="0555 123 45 67" required>
            </div>
            <div class="input-group">
                <label for="customerEmail">E-posta *</label>
                <input type="email" id="customerEmail" placeholder="ornek@email.com" required>
            </div>
            <div class="input-group">
                <label for="customerNote">Not</label>
                <textarea id="customerNote" placeholder="Randevu ile ilgili eklemek istediğiniz bir not varsa..."></textarea>
            </div>
        </div>

        <button class="btn" id="submitBtn" style="display: none;">
            Randevuyu Onayla
        </button>

        <div class="info-box">
            <p>Randevunuz onaylandıktan sonra size e-posta ile bilgilendirme yapılacaktır.</p>
        </div>
    </div>

    <script>
        // APPS SCRIPT URL
        const CONFIG = {
            APPS_SCRIPT_URL: 'https://script.google.com/macros/s/AKfycbyhfesSNFFvYN-SjwNGsOEf_5bKLFkFZkSnHC4l7XjaxmdSN-fr3chox2xRb30HlQ/exec',
            BASE_URL: 'https://rolexizmiristinyepark.github.io/randevu/',

            SHIFTS: {
                'morning': { start: 10, end: 18, label: 'Sabah (10:00-18:00)' },
                'evening': { start: 14, end: 22, label: 'Aksam (14:00-22:00)' },
                'full': { start: 10, end: 22, label: 'Full (10:00-22:00)' }
            },
            APPOINTMENT_HOURS: {
                earliest: 11,
                latest: 21,
                interval: 60
            },
            MAX_DAILY_DELIVERY_APPOINTMENTS: 4,  // Teslim randevuları için max limit
            APPOINTMENT_TYPES: [
                { value: 'delivery', name: 'Saat Teslim Alma' },
                { value: 'service', name: 'Servis & Bakım' },
                { value: 'consultation', name: 'Ürün Danışmanlığı' },
                { value: 'general', name: 'Genel Görüşme' }
            ]
        };

        // Rolex Logo SVG - Tek bir yerde tanımlanır, her yerde kullanılır
        function getRolexLogoSVG() {
            return `<svg class="rolex-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 456.6 494.7" alt="">
                                <linearGradient id="a" x1="35.557" x2="461.064" y1="183.426" y2="330.853" gradientUnits="userSpaceOnUse">
                                    <stop offset="0" stop-color="#f9f4eb"></stop>
                                    <stop offset="0.089" stop-color="#f8f2e7"></stop>
                                    <stop offset="0.17" stop-color="#f6ecdd"></stop>
                                    <stop offset="0.248" stop-color="#f3e3cd"></stop>
                                    <stop offset="0.324" stop-color="#efd6b5"></stop>
                                    <stop offset="0.338" stop-color="#edd3b0"></stop>
                                    <stop offset="0.42" stop-color="#eccfa9"></stop>
                                    <stop offset="0.48" stop-color="#ebcaa0"></stop>
                                    <stop offset="0.703" stop-color="#e1bc8b"></stop>
                                    <stop offset="0.81" stop-color="#dcb480"></stop>
                                    <stop offset="0.844" stop-color="#ca9e70"></stop>
                                    <stop offset="0.893" stop-color="#b98960"></stop>
                                    <stop offset="0.944" stop-color="#af7d57"></stop>
                                    <stop offset="1" stop-color="#ac7954"></stop>
                                </linearGradient>
                                <linearGradient id="b" x1="-8.035" x2="430.509" y1="206.645" y2="284.926" gradientUnits="userSpaceOnUse">
                                    <stop offset="0" stop-color="#e8c798"></stop>
                                    <stop offset="0.139" stop-color="#e8c89b"></stop>
                                    <stop offset="0.241" stop-color="#ebcda4"></stop>
                                    <stop offset="0.316" stop-color="#edd3b0"></stop>
                                    <stop offset="0.399" stop-color="#ecd0a9"></stop>
                                    <stop offset="0.482" stop-color="#e9ca9d"></stop>
                                    <stop offset="0.757" stop-color="#e7c89a"></stop>
                                    <stop offset="0.769" stop-color="#c8a77f"></stop>
                                    <stop offset="0.79" stop-color="#a07e5e"></stop>
                                    <stop offset="0.811" stop-color="#816046"></stop>
                                    <stop offset="0.832" stop-color="#6a4b35"></stop>
                                    <stop offset="0.854" stop-color="#5c3d2b"></stop>
                                    <stop offset="0.877" stop-color="#533624"></stop>
                                    <stop offset="0.901" stop-color="#503322"></stop>
                                </linearGradient>
                                <linearGradient id="c" x1="111.356" x2="409.373" y1="206.84" y2="311.671" gradientUnits="userSpaceOnUse">
                                    <stop offset="0.12" stop-color="#f3dfbd"></stop>
                                    <stop offset="0.257" stop-color="#f0dbb9"></stop>
                                    <stop offset="0.382" stop-color="#e7cfac"></stop>
                                    <stop offset="0.503" stop-color="#d9ba96"></stop>
                                    <stop offset="0.62" stop-color="#c69f7a"></stop>
                                    <stop offset="0.691" stop-color="#b98b67"></stop>
                                </linearGradient>
                                <linearGradient id="d" x1="-7.272" x2="431.272" y1="205.232" y2="283.513" gradientUnits="userSpaceOnUse">
                                    <stop offset="0" stop-color="#e8c798"></stop>
                                    <stop offset="0.139" stop-color="#e8c89b"></stop>
                                    <stop offset="0.241" stop-color="#ebcda4"></stop>
                                    <stop offset="0.316" stop-color="#edd3b0"></stop>
                                    <stop offset="0.399" stop-color="#ecd0a9"></stop>
                                    <stop offset="0.482" stop-color="#e9ca9d"></stop>
                                    <stop offset="0.714" stop-color="#e7c89a"></stop>
                                    <stop offset="0.749" stop-color="#efd8b7"></stop>
                                    <stop offset="0.784" stop-color="#f5e5cf"></stop>
                                    <stop offset="0.821" stop-color="#faefe0"></stop>
                                    <stop offset="0.86" stop-color="#fdf5ea"></stop>
                                    <stop offset="0.901" stop-color="#fef7ee"></stop>
                                </linearGradient>
                                <linearGradient id="e" x1="229.976" x2="209.978" y1="118.482" y2="537.763" gradientUnits="userSpaceOnUse">
                                    <stop offset="0.581" stop-color="#fcfbe9" stop-opacity="0"></stop>
                                    <stop offset="0.628" stop-color="#eee6d0" stop-opacity="0.181"></stop>
                                    <stop offset="0.725" stop-color="#ccb592" stop-opacity="0.554"></stop>
                                    <stop offset="0.842" stop-color="#a37b4c"></stop>
                                    <stop offset="0.843" stop-color="#9e764b"></stop>
                                    <stop offset="0.858" stop-color="#6e543e"></stop>
                                    <stop offset="0.873" stop-color="#4a3a31"></stop>
                                    <stop offset="0.889" stop-color="#2f2624"></stop>
                                    <stop offset="0.904" stop-color="#1c1718"></stop>
                                    <stop offset="0.92" stop-color="#0f0c0d"></stop>
                                    <stop offset="0.937" stop-color="#070506"></stop>
                                    <stop offset="0.955" stop-color="#050304"></stop>
                                </linearGradient>
                                <linearGradient id="f" x1="-8.035" x2="430.509" y1="206.645" y2="284.926" gradientUnits="userSpaceOnUse">
                                    <stop offset="0" stop-color="#e8c798"></stop>
                                    <stop offset="0.102" stop-color="#e8c89b"></stop>
                                    <stop offset="0.178" stop-color="#ebcda4"></stop>
                                    <stop offset="0.234" stop-color="#edd3b0"></stop>
                                    <stop offset="0.357" stop-color="#ecd0a9"></stop>
                                    <stop offset="0.482" stop-color="#e9ca9d"></stop>
                                    <stop offset="0.796" stop-color="#e7c89a"></stop>
                                    <stop offset="0.888" stop-color="#967456"></stop>
                                    <stop offset="0.964" stop-color="#62432f"></stop>
                                    <stop offset="1" stop-color="#503322"></stop>
                                </linearGradient>
                                <linearGradient id="g" x1="392.616" x2="25.121" y1="181.809" y2="331.512" gradientUnits="userSpaceOnUse">
                                    <stop offset="0.803" stop-color="#fcfbe9" stop-opacity="0"></stop>
                                    <stop offset="0.812" stop-color="#eee6d0" stop-opacity="0.181"></stop>
                                    <stop offset="0.831" stop-color="#ccb592" stop-opacity="0.554"></stop>
                                    <stop offset="0.854" stop-color="#a37b4c"></stop>
                                    <stop offset="0.855" stop-color="#9e764b"></stop>
                                    <stop offset="0.868" stop-color="#6e543e"></stop>
                                    <stop offset="0.882" stop-color="#4a3a31"></stop>
                                    <stop offset="0.896" stop-color="#2f2624"></stop>
                                    <stop offset="0.91" stop-color="#1c1718"></stop>
                                    <stop offset="0.924" stop-color="#0f0c0d"></stop>
                                    <stop offset="0.939" stop-color="#070506"></stop>
                                    <stop offset="0.955" stop-color="#050304"></stop>
                                </linearGradient>
                                <radialGradient id="h" cx="30.8" cy="146.5" r="32.89" fx="23.585" fy="166.478" gradientUnits="userSpaceOnUse">
                                    <stop offset="0" stop-color="#fffefa"></stop>
                                    <stop offset="0.248" stop-color="#fefdf8"></stop>
                                    <stop offset="0.433" stop-color="#fefbf1"></stop>
                                    <stop offset="0.452" stop-color="#fdfaf0"></stop>
                                    <stop offset="0.513" stop-color="#f6efe2" stop-opacity="0.866"></stop>
                                    <stop offset="0.62" stop-color="#e4d2be" stop-opacity="0.627"></stop>
                                    <stop offset="0.76" stop-color="#c8a789" stop-opacity="0.314"></stop>
                                    <stop offset="0.901" stop-color="#ac7954" stop-opacity="0"></stop>
                                </radialGradient>
                                <radialGradient id="i" cx="234.59" cy="322.848" r="32.855" fx="237.449" fy="343.873" gradientTransform="matrix(-.8158 .8158 -.8937 -.8937 599.003 165.7)" gradientUnits="userSpaceOnUse">
                                    <stop offset="0" stop-color="#fffefa"></stop>
                                    <stop offset="0.192" stop-color="#fefdf7"></stop>
                                    <stop offset="0.353" stop-color="#fdfaf0"></stop>
                                    <stop offset="0.393" stop-color="#fcf6e9"></stop>
                                    <stop offset="0.451" stop-color="#f7ead6"></stop>
                                    <stop offset="0.52" stop-color="#efd7b8"></stop>
                                    <stop offset="0.544" stop-color="#ecd0ac"></stop>
                                    <stop offset="0.797" stop-color="#714d38"></stop>
                                </radialGradient>
                                <radialGradient id="j" cx="-357.837" cy="226.244" r="36.766" fx="-352.883" fy="247.148" gradientTransform="matrix(-1.1203 0 0 -1.2159 -173.585 310.377)" gradientUnits="userSpaceOnUse">
                                    <stop offset="0" stop-color="#fffefa"></stop>
                                    <stop offset="0.132" stop-color="#fefdf7"></stop>
                                    <stop offset="0.242" stop-color="#fdfaf0"></stop>
                                    <stop offset="0.303" stop-color="#fcf6e9"></stop>
                                    <stop offset="0.392" stop-color="#f7ead6"></stop>
                                    <stop offset="0.497" stop-color="#efd7b8"></stop>
                                    <stop offset="0.532" stop-color="#ecd0ac"></stop>
                                    <stop offset="0.677" stop-color="#835d48"></stop>
                                    <stop offset="0.95" stop-color="#8c5c3d"></stop>
                                </radialGradient>
                                <radialGradient id="k" cx="-333.529" cy="415.262" r="41.056" fx="-340.736" fy="440.547" gradientTransform="matrix(-1.2082 -.2093 .2174 -1.2545 -158.298 521.438)" gradientUnits="userSpaceOnUse">
                                    <stop offset="0.031" stop-color="#fffefa"></stop>
                                    <stop offset="0.095" stop-color="#fcf9f3"></stop>
                                    <stop offset="0.188" stop-color="#f4eadf"></stop>
                                    <stop offset="0.3" stop-color="#e7d4bf"></stop>
                                    <stop offset="0.425" stop-color="#d6b594"></stop>
                                    <stop offset="0.44" stop-color="#d4b18e"></stop>
                                    <stop offset="0.57" stop-color="#d7b694"></stop>
                                    <stop offset="0.747" stop-color="#6d422f"></stop>
                                </radialGradient>
                                <radialGradient id="l" cx="-277.091" cy="427.103" r="41.094" fx="-287.076" fy="451.452" gradientTransform="matrix(-1.1863 -.2055 .2055 -1.1863 6.443 599.36)" gradientUnits="userSpaceOnUse">
                                    <stop offset="0.044" stop-color="#fdf6e0"></stop>
                                    <stop offset="0.112" stop-color="#fbf1d9"></stop>
                                    <stop offset="0.211" stop-color="#f4e3c5"></stop>
                                    <stop offset="0.329" stop-color="#eacea5"></stop>
                                    <stop offset="0.389" stop-color="#e4c092"></stop>
                                    <stop offset="0.632" stop-color="#8c5c3d"></stop>
                                    <stop offset="0.67" stop-color="#372623"></stop>
                                </radialGradient>
                                <path fill="url(#a)" stroke="url(#b)" stroke-miterlimit="10" d="M416.4 119.7s-20.2 1.8-24 26.7c0 0 0 13 5.9 21.6l2.2 3.1s1 1.4-.6 5.1l-73.7 171.2-2.4 4.1s-2.6 4.1-9.6 1.4c0 0-6.1-2.4-4.7-13.4l20.2-146.6 13-87.7s.7-3.4 3.4-4.2c.7-.2 1.4-.5 2.1-1 4.3-2.6 16.9-11.8 17.5-27.7 0 0 3-16.9-11.6-27.5-10.4-7.6-24.4-8.5-35.4-1.9-6.4 3.8-12.3 10.4-13.7 22 0 0-3.1 13.2 4.5 24.4 0 0 5.3 6.3 6.7 7.3 0 0 1.6 1.4 1.2 3.1l-44.2 207.6s-3.1 12.6-13.4 12.8c0 0-7.1 1.4-8.5-10.6l-6.1-129.9-5.5-112.1s.6-5.5 4.7-7.9c0 0 15.5-11.8 10.8-30.7 0 0-4.7-29.3-37.9-23.4 0 0-24.6 7.3-17.5 40.7 0 0 2.4 9.4 11.4 14.9 0 0 5.5 2.4 5.5 9.6L208.2 307s.8 13.8-12.2 14.7c0 0-7.7.8-12.4-23.2L138.1 105s-2.5-11.2 3-16.1c0 0 17.6-22.9-2.4-44.4 0 0-16.7-16.3-38.7-1.2 0 0-15.7 9.8-9.4 35.6 0 0 1.5 10.7 15.2 18.1 0 0 7.9 2.6 8.5 9.5l27.9 186.1s5.7 42.5 4.3 50.9c0 0 .8 7.5-7.3 9.8 0 0-6.1 1.4-12.8-15.5L57.3 179.9s-4.3-10.8 0-15.7c0 0 16.3-26.1-8.6-41.3 0 0-17.9-12.2-36.2 3.7 0 0-20.2 18.3 0 41.3 0 0 4.7 6.3 16.1 9.2 0 0 6.7.2 7.7 7.5l58.6 170.2 32.6 95.5s3.2 11.6 5.1 13.2c0 0 5.3 5.7 23.2 11.4 0 0 41.9 20.8 94.9 14.4 0 0 35.2-3.3 67.4-18.7l5.1-2.9s2.6-1 4.7-9.4l33-98.1 35.8-100.3 21-61.5 4.3-10.6s2.4-6.5 9.6-8.1c0 0 22.2-4.1 22-31.3.2 0-1.6-33.2-37.2-28.7zm-160 335.8s-55.4 9.2-87.3-11.2c0 0-15.1-7.9-10.2-27.7 0 0 3.6-9.3 17.3-14.2 0 0 22.4-13 78-7.7 0 0 44.6 5.1 44.8 28.5.1.1 7.9 24.6-42.6 32.3z"></path>
                                <path fill="url(#c)" stroke="url(#d)" stroke-miterlimit="10" d="M417.23 117.913s-20.2 1.8-24 26.7c0 0 0 13 5.9 21.6l2.2 3.1s1 1.4-.6 5.1l-73.7 171.2-2.4 4.1s-2.6 4.1-9.6 1.4c0 0-6.1-2.4-4.7-13.4l20.2-146.6 13-87.7s.7-3.4 3.4-4.2c.7-.2 3-1.6 3.7-2 4.3-2.6 15.4-10.8 15.9-26.7 0 0 3-16.9-11.6-27.5-10.4-7.6-24.4-8.5-35.4-1.9-6.4 3.8-12.3 10.4-13.7 22 0 0-3.1 13.2 4.5 24.4 0 0 5.3 6.3 6.7 7.3 0 0 1.6 1.4 1.2 3.1l-44.2 207.6s-3.1 12.6-13.4 12.8c0 0-7.1 1.4-8.5-10.6l-6.1-129.9-5.5-112.1s.6-5.5 4.7-7.9c0 0 15.5-11.8 10.8-30.7 0 0-3.8-28.3-37-22.4 0 0-24.7 6.2-17.6 39.6 0 0 3.4 6.8 11.3 13.6 0 0 4.8 3.8 4.8 11.1l-8.5 236.3s.8 13.8-12.2 14.7c0 0-7.7.8-12.4-23.2l-45.5-193.6s-2.5-11.2 3-16.1c0 0 17.6-22.9-2.4-44.4 0 0-16.7-16.3-38.7-1.2 0 0-15.7 9.8-9.4 35.6 0 0 1.5 10.7 15.2 18.1 0 0 7.9 2.6 8.5 9.5l27.9 186.1s5.7 42.5 4.3 50.9c0 0 .8 7.5-7.3 9.8 0 0-6.1 1.4-12.8-15.5l-69.1-157.9s-4.3-10.8 0-15.7c0 0 16.3-26.1-8.6-41.3 0 0-17.9-12.2-36.2 3.7 0 0-20.2 18.3 0 41.3 0 0 4.7 6.3 16.1 9.2 0 0 6.7.2 7.7 7.5l58.6 170.2 32.6 95.5s3.2 11.6 5.1 13.2c0 0 5.3 5.7 23.2 11.4 0 0 41.9 20.8 94.9 14.4 0 0 35.2-3.3 67.4-18.7l5.1-2.9s2.6-1 4.7-9.4l33-98.1 35.8-100.3 21-61.5 4.3-10.6s2.4-6.5 9.6-8.1c0 0 22.2-4.1 22-31.3.2 0-1.6-33.2-37.2-28.7zm-160 335.8s-55.4 9.2-87.3-11.2c0 0-15.1-7.9-10.2-27.7 0 0 3.6-9.3 17.3-14.2 0 0 22.4-13 78-7.7 0 0 44.6 5.1 44.8 28.5.1.1 7.9 24.6-42.6 32.3z"></path>
                                <path fill="url(#e)" stroke="url(#f)" stroke-miterlimit="10" d="M416.4 119.7s-20.2 1.8-24 26.7c0 0 0 13 5.9 21.6l2.2 3.1s1 1.4-.6 5.1l-73.7 171.2-2.4 4.1s-2.6 4.1-9.6 1.4c0 0-6.1-2.4-4.7-13.4l20.2-146.6 13-87.7s.7-3.4 3.4-4.2c.7-.2 1.4-.5 2.1-1 4.3-2.6 16.9-11.8 17.5-27.7 0 0 3-16.9-11.6-27.5-10.4-7.6-24.4-8.5-35.4-1.9-6.4 3.8-12.3 10.4-13.7 22 0 0-3.1 13.2 4.5 24.4 0 0 5.3 6.3 6.7 7.3 0 0 1.6 1.4 1.2 3.1l-44.2 207.6s-3.1 12.6-13.4 12.8c0 0-7.1 1.4-8.5-10.6l-6.1-129.9-5.5-112.1s.6-5.5 4.7-7.9c0 0 15.5-11.8 10.8-30.7 0 0-4.7-29.3-37.9-23.4 0 0-24.6 7.3-17.5 40.7 0 0 2.4 9.4 11.4 14.9 0 0 5.5 2.4 5.5 9.6L208.2 307s.8 13.8-12.2 14.7c0 0-7.7.8-12.4-23.2L138.1 105s-2.5-11.2 3-16.1c0 0 17.6-22.9-2.4-44.4 0 0-16.7-16.3-38.7-1.2 0 0-15.7 9.8-9.4 35.6 0 0 1.5 10.7 15.2 18.1 0 0 7.9 2.6 8.5 9.5l27.9 186.1s5.7 42.5 4.3 50.9c0 0 .8 7.5-7.3 9.8 0 0-6.1 1.4-12.8-15.5L57.3 179.9s-4.3-10.8 0-15.7c0 0 16.3-26.1-8.6-41.3 0 0-17.9-12.2-36.2 3.7 0 0-20.2 18.3 0 41.3 0 0 4.7 6.3 16.1 9.2 0 0 6.7.2 7.7 7.5l58.6 170.2 32.6 95.5s3.2 11.6 5.1 13.2c0 0 5.3 5.7 23.2 11.4 0 0 41.9 20.8 94.9 14.4 0 0 35.2-3.3 67.4-18.7l5.1-2.9s2.6-1 4.7-9.4l33-98.1 35.8-100.3 21-61.5 4.3-10.6s2.4-6.5 9.6-8.1c0 0 22.2-4.1 22-31.3.2 0-1.6-33.2-37.2-28.7zm-160 335.8s-55.4 9.2-87.3-11.2c0 0-15.1-7.9-10.2-27.7 0 0 3.6-9.3 17.3-14.2 0 0 22.4-13 78-7.7 0 0 44.6 5.1 44.8 28.5.1.1 7.9 24.6-42.6 32.3z"></path>
                                <path fill="url(#g)" stroke="url(#f)" stroke-miterlimit="10" d="M416.4 119.7s-20.2 1.8-24 26.7c0 0 0 13 5.9 21.6l2.2 3.1s1 1.4-.6 5.1l-73.7 171.2-2.4 4.1s-2.6 4.1-9.6 1.4c0 0-6.1-2.4-4.7-13.4l20.2-146.6 13-87.7s.7-3.4 3.4-4.2c.7-.2 1.4-.5 2.1-1 4.3-2.6 16.9-11.8 17.5-27.7 0 0 3-16.9-11.6-27.5-10.4-7.6-24.4-8.5-35.4-1.9-6.4 3.8-12.3 10.4-13.7 22 0 0-3.1 13.2 4.5 24.4 0 0 5.3 6.3 6.7 7.3 0 0 1.6 1.4 1.2 3.1l-44.2 207.6s-3.1 12.6-13.4 12.8c0 0-7.1 1.4-8.5-10.6l-6.1-129.9-5.5-112.1s.6-5.5 4.7-7.9c0 0 15.5-11.8 10.8-30.7 0 0-4.7-29.3-37.9-23.4 0 0-24.6 7.3-17.5 40.7 0 0 2.4 9.4 11.4 14.9 0 0 5.5 2.4 5.5 9.6L208.2 307s.8 13.8-12.2 14.7c0 0-7.7.8-12.4-23.2L138.1 105s-2.5-11.2 3-16.1c0 0 17.6-22.9-2.4-44.4 0 0-16.7-16.3-38.7-1.2 0 0-15.7 9.8-9.4 35.6 0 0 1.5 10.7 15.2 18.1 0 0 7.9 2.6 8.5 9.5l27.9 186.1s5.7 42.5 4.3 50.9c0 0 .8 7.5-7.3 9.8 0 0-6.1 1.4-12.8-15.5L57.3 179.9s-4.3-10.8 0-15.7c0 0 16.3-26.1-8.6-41.3 0 0-17.9-12.2-36.2 3.7 0 0-20.2 18.3 0 41.3 0 0 4.7 6.3 16.1 9.2 0 0 6.7.2 7.7 7.5l58.6 170.2 32.6 95.5s3.2 11.6 5.1 13.2c0 0 5.3 5.7 23.2 11.4 0 0 41.9 20.8 94.9 14.4 0 0 35.2-3.3 67.4-18.7l5.1-2.9s2.6-1 4.7-9.4l33-98.1 35.8-100.3 21-61.5 4.3-10.6s2.4-6.5 9.6-8.1c0 0 22.2-4.1 22-31.3.2 0-1.6-33.2-37.2-28.7zm-160 335.8s-55.4 9.2-87.3-11.2c0 0-15.1-7.9-10.2-27.7 0 0 3.6-9.3 17.3-14.2 0 0 23.474-14.622 79.202-8.184 0 0 43.398 5.584 43.598 28.984.1.1 7.9 24.6-42.6 32.3z"></path>
                                <circle cx="30.8" cy="146.5" r="26.8" fill="url(#h)"></circle>
                                <path fill="url(#i)" d="M99.1 90.2C86.5 78.1 86.6 56.9 98 45.8c11.2-10.9 29.8-10.2 41.9 1.9s14.7 26.9 1.9 41.9c-10.2 11.8-30.4 12.4-42.7.6z"></path>
                                <path fill="url(#j)" d="M199.2 34.7c0-16.5 12.9-29.7 28.1-29.7s28.1 13.5 28.1 30-7.9 30.7-28.1 30.7c-15.2-.1-28.1-13.3-28.1-31z"></path>
                                <path fill="url(#k)" d="M304.8 65.1c3-17.3 18.9-29 35.6-26.1 16.6 2.9 27.7 19.2 24.7 36.5s-17.2 29.3-35.6 26.1c-16.6-3-27.9-17.8-24.7-36.5z"></path>
                                <path fill="url(#l)" d="M393.3 144.5c.4-16.7 18.5-27.4 34.9-24.6s27.4 18.5 24.6 34.9-14.5 28.1-34.9 24.6c-16.4-2.7-25-14-24.6-34.9z"></path>
                                <g fill="#140a06">
                                    <path d="M133.6 354.8s-11.4-21.5-17.5-37l-27.3-61.5L64 197.8s-10-21.4-12.1-28.9c0 0-1.3-4.9 2.5-12.1 0 0 9.1-12.4 3.1-20.9 0 0 1.6 6.2-2.8 12.8 0 0-7.2 11.2-7.5 15.5 0 0-.4 7.1 5.3 15.8 0 0 7.1 12.2 8.6 16.2 0 0 57.9 133.4 58.2 134.2.3.7 9.1 21.3 14.3 24.4zM139.5 147.1s25.8 101.3 27.4 105.3c0 0 13.5 53.5 16.1 59.3 0 0 4.4 5.4 8.8 8 0 0-4.9-6.1-7-15.6l-16.1-68.9-21.8-86.5s-10.8-41.4-11.1-50.2c0 0-.7-4.5 2.8-10l4.6-5.9c.5-.6.9-1.2 1.2-1.9 1-1.8 3-5.5 3.7-8.5 0 0 2-14.1-6.3-14.1 0 0-.3 7.7-4.6 14.3 0 0-6.2 9.6-8.9 15.3-.9 2-1.3 4.1-1.2 6.3.2 2.8 1.5 5.8 2.4 10.8.1 0 7.9 28.9 10 42.3zM229.5 78.8l3.3 79.2 4.5 92.6L243 308c1.2 12.4 8.3 10.9 8.3 10.9-6.6-2.8-6-22.7-6-22.7l-5.9-109.7-6-120c0-1 0-1.9.2-2.9 1.1-6.1 3.3-8.4 3.3-8.4 6-10.6 10.9-11.1 12.5-10.9 1.1.1 4.8.7 5.4-.3 1.1-1.7 1.5-8.2 1.5-8.2-1.4-6.3-5.9-7.8-5.9-7.8.4 1.4-5.9 8.5-5.9 8.5l-12 13.8c-3.3 4.3-3.1 10-3.1 10z"></path>
                                    <path d="M239.3 66c-.4.6-.6 1.2-.8 1.9-.3 1.6-.9 4.9-.6 7.5l5.5 119.9 6.3 118.3s.7 4.5 6.7 6.2c0 0-5.9-2.6-5.3-16l-5.2-116.2L240.2 76s-1.1-7.4 1.3-13.3zM314.2 353.1s-4.9-2.9-4.9-10.5l6.1-84.9 12.8-95.5 7.1-59.8s-.7-5.2 3.9-9.4c.6-.6 3.7-4.5 4.2-5.1 1.7-2.3 4.9-3.5 9.7-7.6l6.9-4.6c1.5-.7 3.9 2.8 3.9 1.2.1-3.1-1.1-7.3-3.3-10.2L357 61s-11.1 8.2-14.2 10.6c0 0-12.4 12-15.3 22.9 0 0-2 12.2-2.7 20.2l-13.5 102.1S295.4 323.5 299 344.2c0 0 3.2 16.7 15.2 8.9z"></path>
                                    <path d="M447 142.3s-4.9-7-11.4-9c-1-.3-2.1 0-2.8.6-1.7 1.4-4.7 3.9-6.8 5.6-.8.6-1.7 1.2-2.6 1.7-2.8 1.4-10.8 6.3-17.5 17.9-.4.6-.6 1.3-.7 2.1-.2 2.2-.7 7.1-.8 9.7 0 .7 0 1.3.2 2 .3 1.2.6 4.1-1.3 7.6l-44.4 104.8-26.9 65s-7.3 17.8-21.3 30c0 0-5.6 4.7-20.9 1.8 0 0-60.4-9.5-92.6-4.9 0 0-34.6 2.4-44.2 26.6 0 0-6.4 13.1-1.6 32.2 0 0 3.3 16.4 2.4 22.4 0 0 3.3 7.3 9.1 10.4l2.2 1.8s-15.3-.7-33.5-14.4c0 0 6.4 9.8 22 14.2 0 0 24 9.3 37.7 11.5 0 0-26.9-12-31.8-20.9 0 0 0-2.2 2.9-1.6 0 0 9.5 4.5 45.5 5 0 0 34.9.6 59.6-6.9 0 0 34.8-7.8 40.4-34 0 0 9.8-36.6 19.3-52 0 0 24.2-52.2 32.9-74.8l34.9-87.4s10.2-27 11.1-29c0 0 2.9-11.5 7.5-17.8 0 0 6.3-8.8 10.5-12.4 1.1-.9 2.3-1.6 3.7-1.8 1.6-.3 4.2-.6 6.4.5 0 0 11.5 4.7 15.8 4.2.1.1 2.6-2.3-3-10.7zM301.4 425.5s.5 14.7-20.3 23.3c0 0-20.9 14.3-77.3 8.7 0 0-41.7.2-47.6-21.5 0 0-4.054-13.133 5.25-28.42 0 0 12.113-15.76 54.313-17.56 0 0 52.294-2.525 77.395 15.775 0-.001 10.058 7.397 8.242 19.705z"></path>
                                    <path d="M291.2 404.1c-9.1-7.1-18.124-11.522-18.124-11.522-30.9-6-60.837-4.316-60.837-4.316C167.339 391.362 159 410.9 159 410.9l.774-5.51c-3.402 1.686-2.416 13.034-1.263 14.712 1.426-3.967.705-5.328 4.329-8.875 6.625-6.484 11.734-7.626 14.795-8.919 6.878-2.905 14.116-4.767 20.569-5.961 11.525-2.132 20.547-2.132 20.547-2.132 20.134-.483 31.591.574 37.116 1.302 2.827.372 12.068 2.64 13.256 2.977 36.093 10.233 29.907 28.93 29.907 28.93 3.721-17.952-7.83-23.324-7.83-23.324z"></path>
                                </g>
                                <path fill="#7b4f36" d="M8.8 163.6s4.4 7.7 13.8 11.4c0 0 3.7 1.5 7.3 2.4 0 0 4.1.5 6 3.6l16.5 46.4 23.5 67.9 46 133.6 8.4 24.1 2.1 6.6s1.1 3.5 3.6 4.6c0 0 16.1 10.7 41.7 17.3 0 0 18.6 7.4 50.6 8.6 0 0 36.1 1.1 60.2-9 0 0 17.7-6.7 25.6-11.1 0 0-6.3 6-34.2 15.5 0 0-31 9.4-67.3 5.9 0 0-41.1-4.8-77.7-24.7 0 0-2.9-.5-5.8-10.1L114 411.9l-14.3-42.7L76 300.5l-20.9-61.3-19.1-55s-1.4-4.6-5.5-4.9c-.4 0-.7-.1-1.1-.1-3-.8-17.2-4.8-20.6-15.6z"></path>
                                <path fill="#684c34" d="M190.4 479.8s59.3 13.6 114.1-11.1l9.5-4.2s-18.1 16.4-72.6 21.2c-.1 0-31.2 1.4-51-5.9z"></path>
                                <path fill="#79593a" d="M150.9 420.9s2.1-18.3 10.1-25.7c0 0 7.3-10.7 43.3-14.9 0 0 40.7-5.1 78.3 8.6 0 0 11.9 4.5 16.9 14.8 0 0-7.8-17.6-57.2-21 0 0-27.4-2.1-52.4 3-3.5.7-6.9 1.5-10.4 2.2-5.586 2.002-24.1 5.6-28.6 33z"></path>
                            </svg>`;
        }

        // Global state
        let currentMonth = new Date();
        let selectedDate = null;
        let selectedStaff = null;
        let selectedTime = null;
        let selectedShiftType = null;
        let selectedAppointmentType = null;
        let staffMembers = [];
        let dayShifts = {};
        let allAppointments = {}; // Tüm ayın randevuları {date: [appointments]}
        let googleCalendarEvents = {}; // Google Calendar'dan gelen etkinlikler {date: [events]}
        let specificStaffId = null; // URL parametresinden gelen staff ID
        let lastAppointmentData = null; // Son oluşturulan randevu bilgileri

        document.addEventListener('DOMContentLoaded', async function() {
            // Load settings first
            await loadSettings();

            // URL parametrelerini kontrol et
            const urlParams = new URLSearchParams(window.location.search);
            specificStaffId = urlParams.get('staff');

            if (specificStaffId) {
                // Belirli bir çalışan için sayfa
                await loadStaffMembers();
                const staff = staffMembers.find(s => s.id == specificStaffId);
                if (staff) {
                    const header = document.getElementById('staffHeader');
                    header.textContent = staff.name;
                    header.style.visibility = 'visible';
                    selectedStaff = parseInt(specificStaffId);
                }
            } else {
                await loadStaffMembers();
            }
        });

        // Randevu tipi seçimi
        function selectAppointmentType(type) {
            selectedAppointmentType = type;
            document.querySelectorAll('.type-card').forEach(c => c.classList.remove('selected'));
            document.querySelector(`.type-card[data-type="${type}"]`).classList.add('selected');

            // Takvimi göster ve yükle
            document.getElementById('calendarSection').style.display = 'block';
            renderCalendar();
            loadMonthData();
        }

        // Ay değiştir
        function changeMonth(direction) {
            currentMonth.setMonth(currentMonth.getMonth() + direction);
            renderCalendar();
            loadMonthData();
        }

        // Takvimi render et
        function renderCalendar() {
            const grid = document.getElementById('calendarGrid');
            const monthNames = ['Ocak', 'Şubat', 'Mart', 'Nisan', 'Mayıs', 'Haziran',
                'Temmuz', 'Ağustos', 'Eylül', 'Ekim', 'Kasım', 'Aralık'];
            const dayNames = ['Pzt', 'Sal', 'Çar', 'Per', 'Cum', 'Cmt', 'Paz'];

            document.getElementById('currentMonth').textContent =
                monthNames[currentMonth.getMonth()] + ' ' + currentMonth.getFullYear();

            // Grid'i temizle
            grid.innerHTML = '';

            // Gün başlıklarını ekle
            dayNames.forEach(day => {
                const header = document.createElement('div');
                header.className = 'day-header';
                header.textContent = day;
                grid.appendChild(header);
            });

            // Ayın ilk gününü bul
            const firstDay = new Date(currentMonth.getFullYear(), currentMonth.getMonth(), 1);
            let dayOfWeek = firstDay.getDay();
            dayOfWeek = dayOfWeek === 0 ? 6 : dayOfWeek - 1; // Pazartesi'den başlat

            // Önceki ayın günleri
            for (let i = 0; i < dayOfWeek; i++) {
                const day = document.createElement('div');
                day.className = 'calendar-day other-month';
                grid.appendChild(day);
            }

            // Bu ayın günleri
            const daysInMonth = new Date(currentMonth.getFullYear(), currentMonth.getMonth() + 1, 0).getDate();
            const today = new Date();
            today.setHours(0, 0, 0, 0);

            for (let day = 1; day <= daysInMonth; day++) {
                const dayEl = document.createElement('div');
                dayEl.className = 'calendar-day';
                dayEl.textContent = day;

                const date = new Date(currentMonth.getFullYear(), currentMonth.getMonth(), day);
                date.setHours(0, 0, 0, 0);
                const dateStr = formatLocalDate(date);

                // data-date attribute ekle
                dayEl.setAttribute('data-date', dateStr);

                // Geçmiş günler ve bugün - müşteri aynı gün randevu alamaz
                if (date <= today) {
                    dayEl.classList.add('past');
                } else {
                    // Müsaitliği kontrol et
                    const availability = checkDayAvailability(dateStr);
                    if (availability.available) {
                        dayEl.classList.add('available');
                        dayEl.onclick = () => selectDay(dateStr);
                    } else {
                        dayEl.classList.add('unavailable');
                        dayEl.title = availability.reason || 'Müsait değil';
                    }
                }

                grid.appendChild(dayEl);
            }
        }

        // Günün müsaitliğini kontrol et
        function checkDayAvailability(dateStr) {
            // Vardiya kontrolü
            if (specificStaffId) {
                // Özel çalışan linki - sadece o çalışanın vardiyasını kontrol et
                const staffHasShift = dayShifts[dateStr] && dayShifts[dateStr][specificStaffId];
                if (!staffHasShift) {
                    return { available: false, reason: 'İlgili çalışan bu gün müsait değil' };
                }
            } else {
                // Genel link - herhangi bir çalışan vardiyası var mı kontrol et
                const hasShifts = dayShifts[dateStr] && Object.keys(dayShifts[dateStr]).length > 0;
                if (!hasShifts) {
                    return { available: false, reason: 'Çalışan yok' };
                }
            }

            // Google Calendar'dan SADECE TESLİM randevularını say
            const calendarEvents = googleCalendarEvents[dateStr] || [];
            const now = new Date();
            const todayStr = formatLocalDate(now);

            let deliveryCount = calendarEvents.filter(event => {
                // Sadece teslim randevularını say
                if (event.extendedProperties?.private?.appointmentType !== 'delivery') {
                    return false;
                }

                // Eğer bugünse ve saat geçmişse sayma
                if (dateStr === todayStr && event.start) {
                    // Backend'den gelen time field'ını kullan
                    const eventTime = event.start.time || (() => {
                        const t = new Date(event.start.dateTime);
                        return String(t.getHours()).padStart(2, '0') + ':' + String(t.getMinutes()).padStart(2, '0');
                    })();
                    const currentTime = String(now.getHours()).padStart(2, '0') + ':' + String(now.getMinutes()).padStart(2, '0');
                    if (eventTime < currentTime) {
                        return false;
                    }
                }

                return true;
            }).length;

            // Teslim randevusu için max 4 kontrolü
            if (selectedAppointmentType === 'delivery') {
                if (deliveryCount >= CONFIG.MAX_DAILY_DELIVERY_APPOINTMENTS) {
                    return { available: false, reason: 'Teslim randevuları dolu (Max 4)' };
                }
            }

            return { available: true };
        }

        // Gün seç
        function selectDay(dateStr) {
            selectedDate = dateStr;

            // Seçili günü işaretle
            document.querySelectorAll('.calendar-day').forEach(d => d.classList.remove('selected'));
            document.querySelectorAll('.calendar-day').forEach(d => {
                if (d.getAttribute('data-date') === dateStr) {
                    d.classList.add('selected');
                }
            });

            // Çalışan seçimi göster (eğer özel link değilse)
            if (!specificStaffId) {
                displayAvailableStaff();
                document.getElementById('staffSection').style.display = 'block';
                document.getElementById('timeSection').style.display = 'none';
                document.getElementById('detailsSection').style.display = 'none';
                document.getElementById('submitBtn').style.display = 'none';
            } else {
                // Özel link ise direkt saat seçimine geç
                selectedStaff = parseInt(specificStaffId);
                const shiftType = dayShifts[dateStr]?.[parseInt(specificStaffId)];
                if (shiftType) {
                    selectedShiftType = shiftType;
                    displayAvailableTimeSlots();
                    document.getElementById('timeSection').style.display = 'block';
                    document.getElementById('detailsSection').style.display = 'none';
                    document.getElementById('submitBtn').style.display = 'none';
                }
            }
        }

        // Ayın verilerini yükle
        async function loadMonthData() {
            const startDate = new Date(currentMonth.getFullYear(), currentMonth.getMonth(), 1);
            const endDate = new Date(currentMonth.getFullYear(), currentMonth.getMonth() + 1, 0);

            showLoading();

            try {
                // Vardiyaları ve randevuları paralel yükle
                const monthStr = currentMonth.toISOString().slice(0, 7); // YYYY-MM
                const [shiftsResult, appointmentsResult, calendarResult] = await Promise.all([
                    apiCall('getMonthShifts', { month: monthStr }),
                    apiCall('getMonthAppointments', { month: monthStr }),
                    apiCall('getGoogleCalendarEvents', {
                        startDate: formatLocalDate(startDate),
                        endDate: formatLocalDate(endDate),
                        staffId: specificStaffId || 'all'
                    })
                ]);

                if (shiftsResult.success) {
                    dayShifts = shiftsResult.data || {};
                }

                if (appointmentsResult.success) {
                    allAppointments = appointmentsResult.data || {};
                }

                if (calendarResult.success) {
                    googleCalendarEvents = calendarResult.data || {};
                }

                renderCalendar(); // Takvimi yeniden render et
                hideAlert();
            } catch (error) {
                console.error('Veri yukleme hatasi:', error);
                showLoadingError();
            }
        }

        // Local timezone'da tarih formatla (timezone kayması olmasın)
        function formatLocalDate(date) {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        }

        function apiCall(action, params = {}) {
            return new Promise((resolve, reject) => {
                const callback = 'cb_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                const allParams = { ...params, action, callback };
                const url = CONFIG.APPS_SCRIPT_URL + '?' + new URLSearchParams(allParams).toString();

                let timeoutId = null;

                // Callback'i ÖNCE tanımla
                window[callback] = function(data) {
                    if (timeoutId) clearTimeout(timeoutId);
                    delete window[callback];
                    const scriptEl = document.getElementById('jsonpScript_' + callback);
                    if (scriptEl) {
                        scriptEl.remove();
                    }
                    resolve(data);
                };

                // Timeout ekle (30 saniye)
                timeoutId = setTimeout(() => {
                    if (window[callback]) {
                        delete window[callback];
                        const scriptEl = document.getElementById('jsonpScript_' + callback);
                        if (scriptEl) {
                            scriptEl.remove();
                        }
                        reject(new Error('Timeout - API cevap vermedi'));
                    }
                }, 30000);

                // Sonra script'i ekle
                const script = document.createElement('script');
                script.id = 'jsonpScript_' + callback;
                script.src = url;
                script.onerror = (error) => {
                    if (timeoutId) clearTimeout(timeoutId);
                    delete window[callback];
                    const scriptEl = document.getElementById('jsonpScript_' + callback);
                    if (scriptEl) {
                        scriptEl.remove();
                    }
                    reject(new Error('API cagrisi basarisiz'));
                };

                document.body.appendChild(script);
            });
        }

        async function loadStaffMembers() {
            try {
                const response = await apiCall('getStaff');
                if (response.success) {
                    staffMembers = response.data;
                    console.log('Calisanlar yuklendi:', staffMembers);
                } else {
                    console.error('Calisanlar yuklenemedi:', response.error);
                }
            } catch (error) {
                console.error('API hatasi:', error);
            }
        }

        async function loadSettings() {
            try {
                const response = await apiCall('getSettings');
                if (response.success) {
                    // Update CONFIG with server settings
                    CONFIG.APPOINTMENT_HOURS.interval = response.data.interval || 60;
                    CONFIG.MAX_DAILY_DELIVERY_APPOINTMENTS = response.data.maxDaily || 4;
                }
            } catch (error) {
                console.error('Ayarlar yuklenemedi:', error);
            }
        }

        function displayAvailableStaff() {
            const staffList = document.getElementById('staffList');
            staffList.innerHTML = '';

            if (staffMembers.length === 0) {
                staffList.innerHTML = `
                    <div style="grid-column: 1/-1; text-align: center; padding: 40px;">
                        <div class="spinner" style="margin: 0 auto 20px;"></div>
                        <button class="btn" onclick="location.reload()" style="padding: 12px 30px;">
                            Yenile
                        </button>
                    </div>
                `;
                return;
            }

            const dayShiftsForDate = dayShifts[selectedDate] || {};

            staffMembers.forEach(staff => {
                if (!staff.active) return;

                const shiftType = dayShiftsForDate[staff.id];
                const isWorking = !!shiftType;

                const card = document.createElement('div');
                card.className = 'staff-card' + (!isWorking ? ' unavailable' : '');

                card.innerHTML = '<div class="staff-name">' + staff.name + '</div>';

                if (isWorking) {
                    card.addEventListener('click', () => selectStaff(staff.id, shiftType));
                } else {
                    card.style.opacity = '0.5';
                    card.style.cursor = 'not-allowed';
                }

                staffList.appendChild(card);
            });
        }

        function selectStaff(staffId, shiftType) {
            selectedStaff = parseInt(staffId);
            selectedShiftType = shiftType;

            // Header'da ilgili adını göster
            const staff = staffMembers.find(s => s.id === parseInt(staffId));
            if (staff) {
                const header = document.getElementById('staffHeader');
                header.textContent = staff.name;
                header.style.visibility = 'visible';
            }

            document.querySelectorAll('.staff-card').forEach(c => c.classList.remove('selected'));
            event.currentTarget.classList.add('selected');

            displayAvailableTimeSlots();
            document.getElementById('timeSection').style.display = 'block';
            document.getElementById('detailsSection').style.display = 'none';
            document.getElementById('submitBtn').style.display = 'none';
        }

        function displayAvailableTimeSlots() {
            const container = document.getElementById('timeSlots');
            container.innerHTML = '';

            const now = new Date();
            const todayStr = formatLocalDate(now);
            const isToday = selectedDate === todayStr;

            // Google Calendar'dan SADECE gelecekteki TESLİM randevularını say
            const calendarEvents = googleCalendarEvents[selectedDate] || [];
            let deliveryCount = calendarEvents.filter(event => {
                if (event.extendedProperties?.private?.appointmentType !== 'delivery') {
                    return false;
                }
                if (isToday && event.start?.dateTime) {
                    const eventStart = new Date(event.start.dateTime);
                    if (eventStart < now) {
                        return false;
                    }
                }
                return true;
            }).length;

            // Teslim randevusu için max 4 kontrolü
            if (selectedAppointmentType === 'delivery') {
                if (deliveryCount >= CONFIG.MAX_DAILY_DELIVERY_APPOINTMENTS) {
                    container.innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 20px; color: #dc3545;">Bu gun icin teslim randevulari dolu (Max 4).</div>';
                    return;
                }
            }

            const shift = CONFIG.SHIFTS[selectedShiftType];
            if (!shift) return;

            const { earliest, latest, interval } = CONFIG.APPOINTMENT_HOURS;
            const startHour = Math.max(shift.start, earliest);
            const endHour = Math.min(shift.end, latest);

            const existingAppointments = allAppointments[selectedDate] || [];

            for (let hour = startHour; hour < endHour; hour++) {
                for (let minute = 0; minute < 60; minute += interval) {
                    const timeStr = String(hour).padStart(2, '0') + ':' + String(minute).padStart(2, '0');

                    // Geçmiş saat kontrolü (bugünse)
                    let isPastTime = false;
                    if (isToday) {
                        const slotTime = new Date(now);
                        slotTime.setHours(hour, minute, 0, 0);
                        isPastTime = slotTime < now;
                    }

                    // Randevu sistemindeki çakışma kontrolü
                    const isBookedInSystem = existingAppointments.some(apt => {
                        if (!apt.start) return false;
                        // Backend'den gelen time field'ını kullan
                        const aptTime = apt.start.time || (() => {
                            const t = new Date(apt.start.dateTime);
                            return String(t.getHours()).padStart(2, '0') + ':' + String(t.getMinutes()).padStart(2, '0');
                        })();
                        return aptTime === timeStr && parseInt(apt.extendedProperties?.private?.staffId) === selectedStaff;
                    });

                    // Google Calendar'daki çakışma kontrolü
                    // Aynı saatteki TÜM randevuları say (çalışan farketmeksizin)
                    const sameTimeEvents = calendarEvents.filter(event => {
                        if (!event.start) return false;
                        // Backend'den gelen time field'ını kullan (HH:mm formatında, Türkiye saati)
                        const eventTime = event.start.time || (() => {
                            // Fallback: dateTime'dan parse et
                            const t = new Date(event.start.dateTime);
                            return String(t.getHours()).padStart(2, '0') + ':' + String(t.getMinutes()).padStart(2, '0');
                        })();
                        return eventTime === timeStr;
                    });

                    let isBookedInCalendar = false;

                    // Maksimum 2 servis masası var, 3. randevu alınamaz
                    if (sameTimeEvents.length >= 2) {
                        isBookedInCalendar = true;
                    } else {
                        // Aynı çalışanda randevu var mı kontrol et
                        isBookedInCalendar = sameTimeEvents.some(event => {
                            const eventStaffId = event.extendedProperties?.private?.staffId;
                            const eventAppointmentType = event.extendedProperties?.private?.appointmentType;

                            // TESLİM randevusu kontrolü: Eğer o saatte BAŞKA BİR ÇALIŞANDA TESLİM varsa bloke et
                            if (selectedAppointmentType === 'delivery' && eventAppointmentType === 'delivery') {
                                return true;
                            }

                            // Aynı çalışanın randevusu veya genel randevu
                            if (!eventStaffId || eventStaffId === String(selectedStaff)) {
                                return true;
                            }

                            return false;
                        });
                    }

                    const isBooked = isBookedInSystem || isBookedInCalendar || isPastTime;

                    const btn = document.createElement('div');
                    btn.className = 'slot-btn' + (isBooked ? ' disabled' : '');
                    btn.textContent = timeStr;

                    if (isBooked) {
                        btn.title = 'Bu saat dolu';
                    }

                    if (!isBooked) {
                        btn.addEventListener('click', () => selectTimeSlot(timeStr, btn));
                    }

                    container.appendChild(btn);
                }
            }
        }

        function selectTimeSlot(timeStr, element) {
            selectedTime = timeStr;
            document.querySelectorAll('.slot-btn').forEach(b => b.classList.remove('selected'));
            element.classList.add('selected');

            document.getElementById('detailsSection').style.display = 'block';
            document.getElementById('submitBtn').style.display = 'block';
        }

        document.getElementById('submitBtn').addEventListener('click', async function() {
            const name = document.getElementById('customerName').value.trim();
            const phone = document.getElementById('customerPhone').value.trim();
            const email = document.getElementById('customerEmail').value.trim();
            const note = document.getElementById('customerNote').value.trim();

            if (!selectedAppointmentType) {
                showAlert('Lutfen randevu tipi secin.', 'error');
                return;
            }

            if (!selectedDate || !selectedStaff || !selectedTime) {
                showAlert('Lutfen tarih, calisan ve saat secin.', 'error');
                return;
            }

            if (!name || !phone) {
                showAlert('Lutfen ad ve telefon bilgilerinizi girin.', 'error');
                return;
            }

            if (!email) {
                showAlert('Lutfen e-posta adresinizi girin.', 'error');
                return;
            }

            const btn = document.getElementById('submitBtn');
            btn.disabled = true;
            btn.innerHTML = '<span class="btn-spinner"></span> Randevu oluşturuluyor...';

            const staff = staffMembers.find(s => s.id == selectedStaff);

            if (!staff) {
                showAlert('Çalışan bilgisi bulunamadı. Lütfen sayfayı yenileyin.', 'error');
                btn.disabled = false;
                btn.textContent = 'Randevuyu Onayla';
                return;
            }

            try {
                const result = await apiCall('createAppointment', {
                    date: selectedDate,
                    time: selectedTime,
                    staffId: selectedStaff,
                    staffName: staff.name,
                    customerName: name,
                    customerPhone: phone,
                    customerEmail: email,
                    customerNote: note,
                    shiftType: selectedShiftType,
                    appointmentType: selectedAppointmentType,
                    duration: CONFIG.APPOINTMENT_HOURS.interval
                });

                if (result.success) {
                    // Son randevu bilgilerini kaydet
                    lastAppointmentData = {
                        customerName: name,
                        customerPhone: phone,
                        customerEmail: email,
                        customerNote: note,
                        staffName: staff.name,
                        staffPhone: staff.phone,
                        staffEmail: staff.email,
                        date: selectedDate,
                        time: selectedTime,
                        appointmentType: selectedAppointmentType,
                        duration: CONFIG.APPOINTMENT_HOURS.interval
                    };
                    showSuccessPage(selectedDate, selectedTime, staff.name, note);
                } else {
                    showAlert('Randevu olusturulamadi: ' + (result.error || 'Bilinmeyen hata'), 'error');
                    btn.disabled = false;
                    btn.textContent = 'Randevuyu Onayla';
                }
            } catch (error) {
                showAlert('Randevu oluşturulamadı. Lütfen tekrar deneyiniz.', 'error');
                btn.disabled = false;
                btn.textContent = 'Randevuyu Onayla';
            }
        });

        function showAlert(message, type) {
            document.getElementById('alertContainer').innerHTML = '<div class="alert alert-' + type + '">' + message + '</div>';
        }

        function hideAlert() {
            document.getElementById('alertContainer').innerHTML = '';
        }

        function showLoading() {
            document.getElementById('alertContainer').innerHTML = '<div class="loading"><div class="spinner"></div></div>';
        }

        function showLoadingError() {
            const container = document.querySelector('.container');
            container.innerHTML = `
                <div class="header">
                    <svg class="rolex-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 456.6 494.7" alt="">
                                <linearGradient id="a2" x1="35.557" x2="461.064" y1="183.426" y2="330.853" gradientUnits="userSpaceOnUse">
                                    <stop offset="0" stop-color="#f9f4eb"></stop>
                                    <stop offset="0.089" stop-color="#f8f2e7"></stop>
                                    <stop offset="0.17" stop-color="#f6ecdd"></stop>
                                    <stop offset="0.248" stop-color="#f3e3cd"></stop>
                                    <stop offset="0.324" stop-color="#efd6b5"></stop>
                                    <stop offset="0.338" stop-color="#edd3b0"></stop>
                                    <stop offset="0.42" stop-color="#eccfa9"></stop>
                                    <stop offset="0.48" stop-color="#ebcaa0"></stop>
                                    <stop offset="0.703" stop-color="#e1bc8b"></stop>
                                    <stop offset="0.81" stop-color="#dcb480"></stop>
                                    <stop offset="0.844" stop-color="#ca9e70"></stop>
                                    <stop offset="0.893" stop-color="#b98960"></stop>
                                    <stop offset="0.944" stop-color="#af7d57"></stop>
                                    <stop offset="1" stop-color="#ac7954"></stop>
                                </linearGradient>
                                <linearGradient id="b2" x1="-8.035" x2="430.509" y1="206.645" y2="284.926" gradientUnits="userSpaceOnUse">
                                    <stop offset="0" stop-color="#e8c798"></stop>
                                    <stop offset="0.139" stop-color="#e8c89b"></stop>
                                    <stop offset="0.241" stop-color="#ebcda4"></stop>
                                    <stop offset="0.316" stop-color="#edd3b0"></stop>
                                    <stop offset="0.399" stop-color="#ecd0a9"></stop>
                                    <stop offset="0.482" stop-color="#e9ca9d"></stop>
                                    <stop offset="0.757" stop-color="#e7c89a"></stop>
                                    <stop offset="0.769" stop-color="#c8a77f"></stop>
                                    <stop offset="0.79" stop-color="#a07e5e"></stop>
                                    <stop offset="0.811" stop-color="#816046"></stop>
                                    <stop offset="0.832" stop-color="#6a4b35"></stop>
                                    <stop offset="0.854" stop-color="#5c3d2b"></stop>
                                    <stop offset="0.877" stop-color="#533624"></stop>
                                    <stop offset="0.901" stop-color="#503322"></stop>
                                </linearGradient>
                                <linearGradient id="c2" x1="111.356" x2="409.373" y1="206.84" y2="311.671" gradientUnits="userSpaceOnUse">
                                    <stop offset="0.12" stop-color="#f3dfbd"></stop>
                                    <stop offset="0.257" stop-color="#f0dbb9"></stop>
                                    <stop offset="0.382" stop-color="#e7cfac"></stop>
                                    <stop offset="0.503" stop-color="#d9ba96"></stop>
                                    <stop offset="0.62" stop-color="#c69f7a"></stop>
                                    <stop offset="0.691" stop-color="#b98b67"></stop>
                                </linearGradient>
                                <linearGradient id="d2" x1="-7.272" x2="431.272" y1="205.232" y2="283.513" gradientUnits="userSpaceOnUse">
                                    <stop offset="0" stop-color="#e8c798"></stop>
                                    <stop offset="0.139" stop-color="#e8c89b"></stop>
                                    <stop offset="0.241" stop-color="#ebcda4"></stop>
                                    <stop offset="0.316" stop-color="#edd3b0"></stop>
                                    <stop offset="0.399" stop-color="#ecd0a9"></stop>
                                    <stop offset="0.482" stop-color="#e9ca9d"></stop>
                                    <stop offset="0.714" stop-color="#e7c89a"></stop>
                                    <stop offset="0.749" stop-color="#efd8b7"></stop>
                                    <stop offset="0.784" stop-color="#f5e5cf"></stop>
                                    <stop offset="0.821" stop-color="#faefe0"></stop>
                                    <stop offset="0.86" stop-color="#fdf5ea"></stop>
                                    <stop offset="0.901" stop-color="#fef7ee"></stop>
                                </linearGradient>
                                <linearGradient id="e2" x1="229.976" x2="209.978" y1="118.482" y2="537.763" gradientUnits="userSpaceOnUse">
                                    <stop offset="0.581" stop-color="#fcfbe9" stop-opacity="0"></stop>
                                    <stop offset="0.628" stop-color="#eee6d0" stop-opacity="0.181"></stop>
                                    <stop offset="0.725" stop-color="#ccb592" stop-opacity="0.554"></stop>
                                    <stop offset="0.842" stop-color="#a37b4c"></stop>
                                    <stop offset="0.843" stop-color="#9e764b"></stop>
                                    <stop offset="0.858" stop-color="#6e543e"></stop>
                                    <stop offset="0.873" stop-color="#4a3a31"></stop>
                                    <stop offset="0.889" stop-color="#2f2624"></stop>
                                    <stop offset="0.904" stop-color="#1c1718"></stop>
                                    <stop offset="0.92" stop-color="#0f0c0d"></stop>
                                    <stop offset="0.937" stop-color="#070506"></stop>
                                    <stop offset="0.955" stop-color="#050304"></stop>
                                </linearGradient>
                                <linearGradient id="f2" x1="-8.035" x2="430.509" y1="206.645" y2="284.926" gradientUnits="userSpaceOnUse">
                                    <stop offset="0" stop-color="#e8c798"></stop>
                                    <stop offset="0.102" stop-color="#e8c89b"></stop>
                                    <stop offset="0.178" stop-color="#ebcda4"></stop>
                                    <stop offset="0.234" stop-color="#edd3b0"></stop>
                                    <stop offset="0.357" stop-color="#ecd0a9"></stop>
                                    <stop offset="0.482" stop-color="#e9ca9d"></stop>
                                    <stop offset="0.796" stop-color="#e7c89a"></stop>
                                    <stop offset="0.888" stop-color="#967456"></stop>
                                    <stop offset="0.964" stop-color="#62432f"></stop>
                                    <stop offset="1" stop-color="#503322"></stop>
                                </linearGradient>
                                <linearGradient id="g2" x1="392.616" x2="25.121" y1="181.809" y2="331.512" gradientUnits="userSpaceOnUse">
                                    <stop offset="0.803" stop-color="#fcfbe9" stop-opacity="0"></stop>
                                    <stop offset="0.812" stop-color="#eee6d0" stop-opacity="0.181"></stop>
                                    <stop offset="0.831" stop-color="#ccb592" stop-opacity="0.554"></stop>
                                    <stop offset="0.854" stop-color="#a37b4c"></stop>
                                    <stop offset="0.855" stop-color="#9e764b"></stop>
                                    <stop offset="0.868" stop-color="#6e543e"></stop>
                                    <stop offset="0.882" stop-color="#4a3a31"></stop>
                                    <stop offset="0.896" stop-color="#2f2624"></stop>
                                    <stop offset="0.91" stop-color="#1c1718"></stop>
                                    <stop offset="0.924" stop-color="#0f0c0d"></stop>
                                    <stop offset="0.939" stop-color="#070506"></stop>
                                    <stop offset="0.955" stop-color="#050304"></stop>
                                </linearGradient>
                                <radialGradient id="h2" cx="30.8" cy="146.5" r="32.89" fx="23.585" fy="166.478" gradientUnits="userSpaceOnUse">
                                    <stop offset="0" stop-color="#fffefa"></stop>
                                    <stop offset="0.248" stop-color="#fefdf8"></stop>
                                    <stop offset="0.433" stop-color="#fefbf1"></stop>
                                    <stop offset="0.452" stop-color="#fdfaf0"></stop>
                                    <stop offset="0.513" stop-color="#f6efe2" stop-opacity="0.866"></stop>
                                    <stop offset="0.62" stop-color="#e4d2be" stop-opacity="0.627"></stop>
                                    <stop offset="0.76" stop-color="#c8a789" stop-opacity="0.314"></stop>
                                    <stop offset="0.901" stop-color="#ac7954" stop-opacity="0"></stop>
                                </radialGradient>
                                <radialGradient id="i2" cx="234.59" cy="322.848" r="32.855" fx="237.449" fy="343.873" gradientTransform="matrix(-.8158 .8158 -.8937 -.8937 599.003 165.7)" gradientUnits="userSpaceOnUse">
                                    <stop offset="0" stop-color="#fffefa"></stop>
                                    <stop offset="0.192" stop-color="#fefdf7"></stop>
                                    <stop offset="0.353" stop-color="#fdfaf0"></stop>
                                    <stop offset="0.393" stop-color="#fcf6e9"></stop>
                                    <stop offset="0.451" stop-color="#f7ead6"></stop>
                                    <stop offset="0.52" stop-color="#efd7b8"></stop>
                                    <stop offset="0.544" stop-color="#ecd0ac"></stop>
                                    <stop offset="0.797" stop-color="#714d38"></stop>
                                </radialGradient>
                                <radialGradient id="j2" cx="-357.837" cy="226.244" r="36.766" fx="-352.883" fy="247.148" gradientTransform="matrix(-1.1203 0 0 -1.2159 -173.585 310.377)" gradientUnits="userSpaceOnUse">
                                    <stop offset="0" stop-color="#fffefa"></stop>
                                    <stop offset="0.132" stop-color="#fefdf7"></stop>
                                    <stop offset="0.242" stop-color="#fdfaf0"></stop>
                                    <stop offset="0.303" stop-color="#fcf6e9"></stop>
                                    <stop offset="0.392" stop-color="#f7ead6"></stop>
                                    <stop offset="0.497" stop-color="#efd7b8"></stop>
                                    <stop offset="0.532" stop-color="#ecd0ac"></stop>
                                    <stop offset="0.677" stop-color="#835d48"></stop>
                                    <stop offset="0.95" stop-color="#8c5c3d"></stop>
                                </radialGradient>
                                <radialGradient id="k2" cx="-333.529" cy="415.262" r="41.056" fx="-340.736" fy="440.547" gradientTransform="matrix(-1.2082 -.2093 .2174 -1.2545 -158.298 521.438)" gradientUnits="userSpaceOnUse">
                                    <stop offset="0.031" stop-color="#fffefa"></stop>
                                    <stop offset="0.095" stop-color="#fcf9f3"></stop>
                                    <stop offset="0.188" stop-color="#f4eadf"></stop>
                                    <stop offset="0.3" stop-color="#e7d4bf"></stop>
                                    <stop offset="0.425" stop-color="#d6b594"></stop>
                                    <stop offset="0.44" stop-color="#d4b18e"></stop>
                                    <stop offset="0.57" stop-color="#d7b694"></stop>
                                    <stop offset="0.747" stop-color="#6d422f"></stop>
                                </radialGradient>
                                <radialGradient id="l2" cx="-277.091" cy="427.103" r="41.094" fx="-287.076" fy="451.452" gradientTransform="matrix(-1.1863 -.2055 .2055 -1.1863 6.443 599.36)" gradientUnits="userSpaceOnUse">
                                    <stop offset="0.044" stop-color="#fdf6e0"></stop>
                                    <stop offset="0.112" stop-color="#fbf1d9"></stop>
                                    <stop offset="0.211" stop-color="#f4e3c5"></stop>
                                    <stop offset="0.329" stop-color="#eacea5"></stop>
                                    <stop offset="0.389" stop-color="#e4c092"></stop>
                                    <stop offset="0.632" stop-color="#8c5c3d"></stop>
                                    <stop offset="0.67" stop-color="#372623"></stop>
                                </radialGradient>
                                <path fill="url(#a2)" stroke="url(#b2)" stroke-miterlimit="10" d="M416.4 119.7s-20.2 1.8-24 26.7c0 0 0 13 5.9 21.6l2.2 3.1s1 1.4-.6 5.1l-73.7 171.2-2.4 4.1s-2.6 4.1-9.6 1.4c0 0-6.1-2.4-4.7-13.4l20.2-146.6 13-87.7s.7-3.4 3.4-4.2c.7-.2 1.4-.5 2.1-1 4.3-2.6 16.9-11.8 17.5-27.7 0 0 3-16.9-11.6-27.5-10.4-7.6-24.4-8.5-35.4-1.9-6.4 3.8-12.3 10.4-13.7 22 0 0-3.1 13.2 4.5 24.4 0 0 5.3 6.3 6.7 7.3 0 0 1.6 1.4 1.2 3.1l-44.2 207.6s-3.1 12.6-13.4 12.8c0 0-7.1 1.4-8.5-10.6l-6.1-129.9-5.5-112.1s.6-5.5 4.7-7.9c0 0 15.5-11.8 10.8-30.7 0 0-4.7-29.3-37.9-23.4 0 0-24.6 7.3-17.5 40.7 0 0 2.4 9.4 11.4 14.9 0 0 5.5 2.4 5.5 9.6L208.2 307s.8 13.8-12.2 14.7c0 0-7.7.8-12.4-23.2L138.1 105s-2.5-11.2 3-16.1c0 0 17.6-22.9-2.4-44.4 0 0-16.7-16.3-38.7-1.2 0 0-15.7 9.8-9.4 35.6 0 0 1.5 10.7 15.2 18.1 0 0 7.9 2.6 8.5 9.5l27.9 186.1s5.7 42.5 4.3 50.9c0 0 .8 7.5-7.3 9.8 0 0-6.1 1.4-12.8-15.5L57.3 179.9s-4.3-10.8 0-15.7c0 0 16.3-26.1-8.6-41.3 0 0-17.9-12.2-36.2 3.7 0 0-20.2 18.3 0 41.3 0 0 4.7 6.3 16.1 9.2 0 0 6.7.2 7.7 7.5l58.6 170.2 32.6 95.5s3.2 11.6 5.1 13.2c0 0 5.3 5.7 23.2 11.4 0 0 41.9 20.8 94.9 14.4 0 0 35.2-3.3 67.4-18.7l5.1-2.9s2.6-1 4.7-9.4l33-98.1 35.8-100.3 21-61.5 4.3-10.6s2.4-6.5 9.6-8.1c0 0 22.2-4.1 22-31.3.2 0-1.6-33.2-37.2-28.7zm-160 335.8s-55.4 9.2-87.3-11.2c0 0-15.1-7.9-10.2-27.7 0 0 3.6-9.3 17.3-14.2 0 0 22.4-13 78-7.7 0 0 44.6 5.1 44.8 28.5.1.1 7.9 24.6-42.6 32.3z"></path>
                                <path fill="url(#c2)" stroke="url(#d2)" stroke-miterlimit="10" d="M417.23 117.913s-20.2 1.8-24 26.7c0 0 0 13 5.9 21.6l2.2 3.1s1 1.4-.6 5.1l-73.7 171.2-2.4 4.1s-2.6 4.1-9.6 1.4c0 0-6.1-2.4-4.7-13.4l20.2-146.6 13-87.7s.7-3.4 3.4-4.2c.7-.2 3-1.6 3.7-2 4.3-2.6 15.4-10.8 15.9-26.7 0 0 3-16.9-11.6-27.5-10.4-7.6-24.4-8.5-35.4-1.9-6.4 3.8-12.3 10.4-13.7 22 0 0-3.1 13.2 4.5 24.4 0 0 5.3 6.3 6.7 7.3 0 0 1.6 1.4 1.2 3.1l-44.2 207.6s-3.1 12.6-13.4 12.8c0 0-7.1 1.4-8.5-10.6l-6.1-129.9-5.5-112.1s.6-5.5 4.7-7.9c0 0 15.5-11.8 10.8-30.7 0 0-3.8-28.3-37-22.4 0 0-24.7 6.2-17.6 39.6 0 0 3.4 6.8 11.3 13.6 0 0 4.8 3.8 4.8 11.1l-8.5 236.3s.8 13.8-12.2 14.7c0 0-7.7.8-12.4-23.2l-45.5-193.6s-2.5-11.2 3-16.1c0 0 17.6-22.9-2.4-44.4 0 0-16.7-16.3-38.7-1.2 0 0-15.7 9.8-9.4 35.6 0 0 1.5 10.7 15.2 18.1 0 0 7.9 2.6 8.5 9.5l27.9 186.1s5.7 42.5 4.3 50.9c0 0 .8 7.5-7.3 9.8 0 0-6.1 1.4-12.8-15.5l-69.1-157.9s-4.3-10.8 0-15.7c0 0 16.3-26.1-8.6-41.3 0 0-17.9-12.2-36.2 3.7 0 0-20.2 18.3 0 41.3 0 0 4.7 6.3 16.1 9.2 0 0 6.7.2 7.7 7.5l58.6 170.2 32.6 95.5s3.2 11.6 5.1 13.2c0 0 5.3 5.7 23.2 11.4 0 0 41.9 20.8 94.9 14.4 0 0 35.2-3.3 67.4-18.7l5.1-2.9s2.6-1 4.7-9.4l33-98.1 35.8-100.3 21-61.5 4.3-10.6s2.4-6.5 9.6-8.1c0 0 22.2-4.1 22-31.3.2 0-1.6-33.2-37.2-28.7zm-160 335.8s-55.4 9.2-87.3-11.2c0 0-15.1-7.9-10.2-27.7 0 0 3.6-9.3 17.3-14.2 0 0 22.4-13 78-7.7 0 0 44.6 5.1 44.8 28.5.1.1 7.9 24.6-42.6 32.3z"></path>
                                <path fill="url(#e2)" stroke="url(#f2)" stroke-miterlimit="10" d="M416.4 119.7s-20.2 1.8-24 26.7c0 0 0 13 5.9 21.6l2.2 3.1s1 1.4-.6 5.1l-73.7 171.2-2.4 4.1s-2.6 4.1-9.6 1.4c0 0-6.1-2.4-4.7-13.4l20.2-146.6 13-87.7s.7-3.4 3.4-4.2c.7-.2 1.4-.5 2.1-1 4.3-2.6 16.9-11.8 17.5-27.7 0 0 3-16.9-11.6-27.5-10.4-7.6-24.4-8.5-35.4-1.9-6.4 3.8-12.3 10.4-13.7 22 0 0-3.1 13.2 4.5 24.4 0 0 5.3 6.3 6.7 7.3 0 0 1.6 1.4 1.2 3.1l-44.2 207.6s-3.1 12.6-13.4 12.8c0 0-7.1 1.4-8.5-10.6l-6.1-129.9-5.5-112.1s.6-5.5 4.7-7.9c0 0 15.5-11.8 10.8-30.7 0 0-4.7-29.3-37.9-23.4 0 0-24.6 7.3-17.5 40.7 0 0 2.4 9.4 11.4 14.9 0 0 5.5 2.4 5.5 9.6L208.2 307s.8 13.8-12.2 14.7c0 0-7.7.8-12.4-23.2L138.1 105s-2.5-11.2 3-16.1c0 0 17.6-22.9-2.4-44.4 0 0-16.7-16.3-38.7-1.2 0 0-15.7 9.8-9.4 35.6 0 0 1.5 10.7 15.2 18.1 0 0 7.9 2.6 8.5 9.5l27.9 186.1s5.7 42.5 4.3 50.9c0 0 .8 7.5-7.3 9.8 0 0-6.1 1.4-12.8-15.5L57.3 179.9s-4.3-10.8 0-15.7c0 0 16.3-26.1-8.6-41.3 0 0-17.9-12.2-36.2 3.7 0 0-20.2 18.3 0 41.3 0 0 4.7 6.3 16.1 9.2 0 0 6.7.2 7.7 7.5l58.6 170.2 32.6 95.5s3.2 11.6 5.1 13.2c0 0 5.3 5.7 23.2 11.4 0 0 41.9 20.8 94.9 14.4 0 0 35.2-3.3 67.4-18.7l5.1-2.9s2.6-1 4.7-9.4l33-98.1 35.8-100.3 21-61.5 4.3-10.6s2.4-6.5 9.6-8.1c0 0 22.2-4.1 22-31.3.2 0-1.6-33.2-37.2-28.7zm-160 335.8s-55.4 9.2-87.3-11.2c0 0-15.1-7.9-10.2-27.7 0 0 3.6-9.3 17.3-14.2 0 0 22.4-13 78-7.7 0 0 44.6 5.1 44.8 28.5.1.1 7.9 24.6-42.6 32.3z"></path>
                                <path fill="url(#g2)" stroke="url(#f2)" stroke-miterlimit="10" d="M416.4 119.7s-20.2 1.8-24 26.7c0 0 0 13 5.9 21.6l2.2 3.1s1 1.4-.6 5.1l-73.7 171.2-2.4 4.1s-2.6 4.1-9.6 1.4c0 0-6.1-2.4-4.7-13.4l20.2-146.6 13-87.7s.7-3.4 3.4-4.2c.7-.2 1.4-.5 2.1-1 4.3-2.6 16.9-11.8 17.5-27.7 0 0 3-16.9-11.6-27.5-10.4-7.6-24.4-8.5-35.4-1.9-6.4 3.8-12.3 10.4-13.7 22 0 0-3.1 13.2 4.5 24.4 0 0 5.3 6.3 6.7 7.3 0 0 1.6 1.4 1.2 3.1l-44.2 207.6s-3.1 12.6-13.4 12.8c0 0-7.1 1.4-8.5-10.6l-6.1-129.9-5.5-112.1s.6-5.5 4.7-7.9c0 0 15.5-11.8 10.8-30.7 0 0-4.7-29.3-37.9-23.4 0 0-24.6 7.3-17.5 40.7 0 0 2.4 9.4 11.4 14.9 0 0 5.5 2.4 5.5 9.6L208.2 307s.8 13.8-12.2 14.7c0 0-7.7.8-12.4-23.2L138.1 105s-2.5-11.2 3-16.1c0 0 17.6-22.9-2.4-44.4 0 0-16.7-16.3-38.7-1.2 0 0-15.7 9.8-9.4 35.6 0 0 1.5 10.7 15.2 18.1 0 0 7.9 2.6 8.5 9.5l27.9 186.1s5.7 42.5 4.3 50.9c0 0 .8 7.5-7.3 9.8 0 0-6.1 1.4-12.8-15.5L57.3 179.9s-4.3-10.8 0-15.7c0 0 16.3-26.1-8.6-41.3 0 0-17.9-12.2-36.2 3.7 0 0-20.2 18.3 0 41.3 0 0 4.7 6.3 16.1 9.2 0 0 6.7.2 7.7 7.5l58.6 170.2 32.6 95.5s3.2 11.6 5.1 13.2c0 0 5.3 5.7 23.2 11.4 0 0 41.9 20.8 94.9 14.4 0 0 35.2-3.3 67.4-18.7l5.1-2.9s2.6-1 4.7-9.4l33-98.1 35.8-100.3 21-61.5 4.3-10.6s2.4-6.5 9.6-8.1c0 0 22.2-4.1 22-31.3.2 0-1.6-33.2-37.2-28.7zm-160 335.8s-55.4 9.2-87.3-11.2c0 0-15.1-7.9-10.2-27.7 0 0 3.6-9.3 17.3-14.2 0 0 23.474-14.622 79.202-8.184 0 0 43.398 5.584 43.598 28.984.1.1 7.9 24.6-42.6 32.3z"></path>
                                <circle cx="30.8" cy="146.5" r="26.8" fill="url(#h2)"></circle>
                                <path fill="url(#i2)" d="M99.1 90.2C86.5 78.1 86.6 56.9 98 45.8c11.2-10.9 29.8-10.2 41.9 1.9s14.7 26.9 1.9 41.9c-10.2 11.8-30.4 12.4-42.7.6z"></path>
                                <path fill="url(#j2)" d="M199.2 34.7c0-16.5 12.9-29.7 28.1-29.7s28.1 13.5 28.1 30-7.9 30.7-28.1 30.7c-15.2-.1-28.1-13.3-28.1-31z"></path>
                                <path fill="url(#k2)" d="M304.8 65.1c3-17.3 18.9-29 35.6-26.1 16.6 2.9 27.7 19.2 24.7 36.5s-17.2 29.3-35.6 26.1c-16.6-3-27.9-17.8-24.7-36.5z"></path>
                                <path fill="url(#l2)" d="M393.3 144.5c.4-16.7 18.5-27.4 34.9-24.6s27.4 18.5 24.6 34.9-14.5 28.1-34.9 24.6c-16.4-2.7-25-14-24.6-34.9z"></path>
                                <g fill="#140a06">
                                    <path d="M133.6 354.8s-11.4-21.5-17.5-37l-27.3-61.5L64 197.8s-10-21.4-12.1-28.9c0 0-1.3-4.9 2.5-12.1 0 0 9.1-12.4 3.1-20.9 0 0 1.6 6.2-2.8 12.8 0 0-7.2 11.2-7.5 15.5 0 0-.4 7.1 5.3 15.8 0 0 7.1 12.2 8.6 16.2 0 0 57.9 133.4 58.2 134.2.3.7 9.1 21.3 14.3 24.4zM139.5 147.1s25.8 101.3 27.4 105.3c0 0 13.5 53.5 16.1 59.3 0 0 4.4 5.4 8.8 8 0 0-4.9-6.1-7-15.6l-16.1-68.9-21.8-86.5s-10.8-41.4-11.1-50.2c0 0-.7-4.5 2.8-10l4.6-5.9c.5-.6.9-1.2 1.2-1.9 1-1.8 3-5.5 3.7-8.5 0 0 2-14.1-6.3-14.1 0 0-.3 7.7-4.6 14.3 0 0-6.2 9.6-8.9 15.3-.9 2-1.3 4.1-1.2 6.3.2 2.8 1.5 5.8 2.4 10.8.1 0 7.9 28.9 10 42.3zM229.5 78.8l3.3 79.2 4.5 92.6L243 308c1.2 12.4 8.3 10.9 8.3 10.9-6.6-2.8-6-22.7-6-22.7l-5.9-109.7-6-120c0-1 0-1.9.2-2.9 1.1-6.1 3.3-8.4 3.3-8.4 6-10.6 10.9-11.1 12.5-10.9 1.1.1 4.8.7 5.4-.3 1.1-1.7 1.5-8.2 1.5-8.2-1.4-6.3-5.9-7.8-5.9-7.8.4 1.4-5.9 8.5-5.9 8.5l-12 13.8c-3.3 4.3-3.1 10-3.1 10z"></path>
                                    <path d="M239.3 66c-.4.6-.6 1.2-.8 1.9-.3 1.6-.9 4.9-.6 7.5l5.5 119.9 6.3 118.3s.7 4.5 6.7 6.2c0 0-5.9-2.6-5.3-16l-5.2-116.2L240.2 76s-1.1-7.4 1.3-13.3zM314.2 353.1s-4.9-2.9-4.9-10.5l6.1-84.9 12.8-95.5 7.1-59.8s-.7-5.2 3.9-9.4c.6-.6 3.7-4.5 4.2-5.1 1.7-2.3 4.9-3.5 9.7-7.6l6.9-4.6c1.5-.7 3.9 2.8 3.9 1.2.1-3.1-1.1-7.3-3.3-10.2L357 61s-11.1 8.2-14.2 10.6c0 0-12.4 12-15.3 22.9 0 0-2 12.2-2.7 20.2l-13.5 102.1S295.4 323.5 299 344.2c0 0 3.2 16.7 15.2 8.9z"></path>
                                    <path d="M447 142.3s-4.9-7-11.4-9c-1-.3-2.1 0-2.8.6-1.7 1.4-4.7 3.9-6.8 5.6-.8.6-1.7 1.2-2.6 1.7-2.8 1.4-10.8 6.3-17.5 17.9-.4.6-.6 1.3-.7 2.1-.2 2.2-.7 7.1-.8 9.7 0 .7 0 1.3.2 2 .3 1.2.6 4.1-1.3 7.6l-44.4 104.8-26.9 65s-7.3 17.8-21.3 30c0 0-5.6 4.7-20.9 1.8 0 0-60.4-9.5-92.6-4.9 0 0-34.6 2.4-44.2 26.6 0 0-6.4 13.1-1.6 32.2 0 0 3.3 16.4 2.4 22.4 0 0 3.3 7.3 9.1 10.4l2.2 1.8s-15.3-.7-33.5-14.4c0 0 6.4 9.8 22 14.2 0 0 24 9.3 37.7 11.5 0 0-26.9-12-31.8-20.9 0 0 0-2.2 2.9-1.6 0 0 9.5 4.5 45.5 5 0 0 34.9.6 59.6-6.9 0 0 34.8-7.8 40.4-34 0 0 9.8-36.6 19.3-52 0 0 24.2-52.2 32.9-74.8l34.9-87.4s10.2-27 11.1-29c0 0 2.9-11.5 7.5-17.8 0 0 6.3-8.8 10.5-12.4 1.1-.9 2.3-1.6 3.7-1.8 1.6-.3 4.2-.6 6.4.5 0 0 11.5 4.7 15.8 4.2.1.1 2.6-2.3-3-10.7zM301.4 425.5s.5 14.7-20.3 23.3c0 0-20.9 14.3-77.3 8.7 0 0-41.7.2-47.6-21.5 0 0-4.054-13.133 5.25-28.42 0 0 12.113-15.76 54.313-17.56 0 0 52.294-2.525 77.395 15.775 0-.001 10.058 7.397 8.242 19.705z"></path>
                                    <path d="M291.2 404.1c-9.1-7.1-18.124-11.522-18.124-11.522-30.9-6-60.837-4.316-60.837-4.316C167.339 391.362 159 410.9 159 410.9l.774-5.51c-3.402 1.686-2.416 13.034-1.263 14.712 1.426-3.967.705-5.328 4.329-8.875 6.625-6.484 11.734-7.626 14.795-8.919 6.878-2.905 14.116-4.767 20.569-5.961 11.525-2.132 20.547-2.132 20.547-2.132 20.134-.483 31.591.574 37.116 1.302 2.827.372 12.068 2.64 13.256 2.977 36.093 10.233 29.907 28.93 29.907 28.93 3.721-17.952-7.83-23.324-7.83-23.324z"></path>
                                </g>
                                <path fill="#7b4f36" d="M8.8 163.6s4.4 7.7 13.8 11.4c0 0 3.7 1.5 7.3 2.4 0 0 4.1.5 6 3.6l16.5 46.4 23.5 67.9 46 133.6 8.4 24.1 2.1 6.6s1.1 3.5 3.6 4.6c0 0 16.1 10.7 41.7 17.3 0 0 18.6 7.4 50.6 8.6 0 0 36.1 1.1 60.2-9 0 0 17.7-6.7 25.6-11.1 0 0-6.3 6-34.2 15.5 0 0-31 9.4-67.3 5.9 0 0-41.1-4.8-77.7-24.7 0 0-2.9-.5-5.8-10.1L114 411.9l-14.3-42.7L76 300.5l-20.9-61.3-19.1-55s-1.4-4.6-5.5-4.9c-.4 0-.7-.1-1.1-.1-3-.8-17.2-4.8-20.6-15.6z"></path>
                                <path fill="#684c34" d="M190.4 479.8s59.3 13.6 114.1-11.1l9.5-4.2s-18.1 16.4-72.6 21.2c-.1 0-31.2 1.4-51-5.9z"></path>
                                <path fill="#79593a" d="M150.9 420.9s2.1-18.3 10.1-25.7c0 0 7.3-10.7 43.3-14.9 0 0 40.7-5.1 78.3 8.6 0 0 11.9 4.5 16.9 14.8 0 0-7.8-17.6-57.2-21 0 0-27.4-2.1-52.4 3-3.5.7-6.9 1.5-10.4 2.2-5.586 2.002-24.1 5.6-28.6 33z"></path>
                    </svg>
                    <h2 style="margin: 20px 0 2px; font-size: 14px; font-weight: normal; letter-spacing: 1px; text-align: center; color: #757575; font-family: 'Montserrat', sans-serif;">Rolex İzmir İstinyepark</h2>
                </div>

                <div class="loading-error-container">
                    <div class="spinner"></div>
                    <button class="btn" onclick="location.reload()" style="margin-top: 40px; padding: 12px 30px;">
                        Yeniden Dene
                    </button>
                </div>
            `;
        }

        function showSuccessPage(dateStr, timeStr, staffName, customerNote) {
            // Tarihi formatla (12 Ekim 2025, Salı)
            const date = new Date(dateStr);
            const months = ['Ocak', 'Şubat', 'Mart', 'Nisan', 'Mayıs', 'Haziran',
                           'Temmuz', 'Ağustos', 'Eylül', 'Ekim', 'Kasım', 'Aralık'];
            const days = ['Pazar', 'Pazartesi', 'Salı', 'Çarşamba', 'Perşembe', 'Cuma', 'Cumartesi'];

            const formattedDate = `${date.getDate()} ${months[date.getMonth()]} ${date.getFullYear()}, ${days[date.getDay()]}`;

            const container = document.querySelector('.container');
            container.innerHTML = `
                <div class="header">
                    <svg class="rolex-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 456.6 494.7" alt="">
                                <linearGradient id="a" x1="35.557" x2="461.064" y1="183.426" y2="330.853" gradientUnits="userSpaceOnUse">
                                    <stop offset="0" stop-color="#f9f4eb"></stop>
                                    <stop offset="0.089" stop-color="#f8f2e7"></stop>
                                    <stop offset="0.17" stop-color="#f6ecdd"></stop>
                                    <stop offset="0.248" stop-color="#f3e3cd"></stop>
                                    <stop offset="0.324" stop-color="#efd6b5"></stop>
                                    <stop offset="0.338" stop-color="#edd3b0"></stop>
                                    <stop offset="0.42" stop-color="#eccfa9"></stop>
                                    <stop offset="0.48" stop-color="#ebcaa0"></stop>
                                    <stop offset="0.703" stop-color="#e1bc8b"></stop>
                                    <stop offset="0.81" stop-color="#dcb480"></stop>
                                    <stop offset="0.844" stop-color="#ca9e70"></stop>
                                    <stop offset="0.893" stop-color="#b98960"></stop>
                                    <stop offset="0.944" stop-color="#af7d57"></stop>
                                    <stop offset="1" stop-color="#ac7954"></stop>
                                </linearGradient>
                                <linearGradient id="b" x1="-8.035" x2="430.509" y1="206.645" y2="284.926" gradientUnits="userSpaceOnUse">
                                    <stop offset="0" stop-color="#e8c798"></stop>
                                    <stop offset="0.139" stop-color="#e8c89b"></stop>
                                    <stop offset="0.241" stop-color="#ebcda4"></stop>
                                    <stop offset="0.316" stop-color="#edd3b0"></stop>
                                    <stop offset="0.399" stop-color="#ecd0a9"></stop>
                                    <stop offset="0.482" stop-color="#e9ca9d"></stop>
                                    <stop offset="0.757" stop-color="#e7c89a"></stop>
                                    <stop offset="0.769" stop-color="#c8a77f"></stop>
                                    <stop offset="0.79" stop-color="#a07e5e"></stop>
                                    <stop offset="0.811" stop-color="#816046"></stop>
                                    <stop offset="0.832" stop-color="#6a4b35"></stop>
                                    <stop offset="0.854" stop-color="#5c3d2b"></stop>
                                    <stop offset="0.877" stop-color="#533624"></stop>
                                    <stop offset="0.901" stop-color="#503322"></stop>
                                </linearGradient>
                                <linearGradient id="c" x1="111.356" x2="409.373" y1="206.84" y2="311.671" gradientUnits="userSpaceOnUse">
                                    <stop offset="0.12" stop-color="#f3dfbd"></stop>
                                    <stop offset="0.257" stop-color="#f0dbb9"></stop>
                                    <stop offset="0.382" stop-color="#e7cfac"></stop>
                                    <stop offset="0.503" stop-color="#d9ba96"></stop>
                                    <stop offset="0.62" stop-color="#c69f7a"></stop>
                                    <stop offset="0.691" stop-color="#b98b67"></stop>
                                </linearGradient>
                                <linearGradient id="d" x1="-7.272" x2="431.272" y1="205.232" y2="283.513" gradientUnits="userSpaceOnUse">
                                    <stop offset="0" stop-color="#e8c798"></stop>
                                    <stop offset="0.139" stop-color="#e8c89b"></stop>
                                    <stop offset="0.241" stop-color="#ebcda4"></stop>
                                    <stop offset="0.316" stop-color="#edd3b0"></stop>
                                    <stop offset="0.399" stop-color="#ecd0a9"></stop>
                                    <stop offset="0.482" stop-color="#e9ca9d"></stop>
                                    <stop offset="0.714" stop-color="#e7c89a"></stop>
                                    <stop offset="0.749" stop-color="#efd8b7"></stop>
                                    <stop offset="0.784" stop-color="#f5e5cf"></stop>
                                    <stop offset="0.821" stop-color="#faefe0"></stop>
                                    <stop offset="0.86" stop-color="#fdf5ea"></stop>
                                    <stop offset="0.901" stop-color="#fef7ee"></stop>
                                </linearGradient>
                                <linearGradient id="e" x1="229.976" x2="209.978" y1="118.482" y2="537.763" gradientUnits="userSpaceOnUse">
                                    <stop offset="0.581" stop-color="#fcfbe9" stop-opacity="0"></stop>
                                    <stop offset="0.628" stop-color="#eee6d0" stop-opacity="0.181"></stop>
                                    <stop offset="0.725" stop-color="#ccb592" stop-opacity="0.554"></stop>
                                    <stop offset="0.842" stop-color="#a37b4c"></stop>
                                    <stop offset="0.843" stop-color="#9e764b"></stop>
                                    <stop offset="0.858" stop-color="#6e543e"></stop>
                                    <stop offset="0.873" stop-color="#4a3a31"></stop>
                                    <stop offset="0.889" stop-color="#2f2624"></stop>
                                    <stop offset="0.904" stop-color="#1c1718"></stop>
                                    <stop offset="0.92" stop-color="#0f0c0d"></stop>
                                    <stop offset="0.937" stop-color="#070506"></stop>
                                    <stop offset="0.955" stop-color="#050304"></stop>
                                </linearGradient>
                                <linearGradient id="f" x1="-8.035" x2="430.509" y1="206.645" y2="284.926" gradientUnits="userSpaceOnUse">
                                    <stop offset="0" stop-color="#e8c798"></stop>
                                    <stop offset="0.102" stop-color="#e8c89b"></stop>
                                    <stop offset="0.178" stop-color="#ebcda4"></stop>
                                    <stop offset="0.234" stop-color="#edd3b0"></stop>
                                    <stop offset="0.357" stop-color="#ecd0a9"></stop>
                                    <stop offset="0.482" stop-color="#e9ca9d"></stop>
                                    <stop offset="0.796" stop-color="#e7c89a"></stop>
                                    <stop offset="0.888" stop-color="#967456"></stop>
                                    <stop offset="0.964" stop-color="#62432f"></stop>
                                    <stop offset="1" stop-color="#503322"></stop>
                                </linearGradient>
                                <linearGradient id="g" x1="392.616" x2="25.121" y1="181.809" y2="331.512" gradientUnits="userSpaceOnUse">
                                    <stop offset="0.803" stop-color="#fcfbe9" stop-opacity="0"></stop>
                                    <stop offset="0.812" stop-color="#eee6d0" stop-opacity="0.181"></stop>
                                    <stop offset="0.831" stop-color="#ccb592" stop-opacity="0.554"></stop>
                                    <stop offset="0.854" stop-color="#a37b4c"></stop>
                                    <stop offset="0.855" stop-color="#9e764b"></stop>
                                    <stop offset="0.868" stop-color="#6e543e"></stop>
                                    <stop offset="0.882" stop-color="#4a3a31"></stop>
                                    <stop offset="0.896" stop-color="#2f2624"></stop>
                                    <stop offset="0.91" stop-color="#1c1718"></stop>
                                    <stop offset="0.924" stop-color="#0f0c0d"></stop>
                                    <stop offset="0.939" stop-color="#070506"></stop>
                                    <stop offset="0.955" stop-color="#050304"></stop>
                                </linearGradient>
                                <radialGradient id="h" cx="30.8" cy="146.5" r="32.89" fx="23.585" fy="166.478" gradientUnits="userSpaceOnUse">
                                    <stop offset="0" stop-color="#fffefa"></stop>
                                    <stop offset="0.248" stop-color="#fefdf8"></stop>
                                    <stop offset="0.433" stop-color="#fefbf1"></stop>
                                    <stop offset="0.452" stop-color="#fdfaf0"></stop>
                                    <stop offset="0.513" stop-color="#f6efe2" stop-opacity="0.866"></stop>
                                    <stop offset="0.62" stop-color="#e4d2be" stop-opacity="0.627"></stop>
                                    <stop offset="0.76" stop-color="#c8a789" stop-opacity="0.314"></stop>
                                    <stop offset="0.901" stop-color="#ac7954" stop-opacity="0"></stop>
                                </radialGradient>
                                <radialGradient id="i" cx="234.59" cy="322.848" r="32.855" fx="237.449" fy="343.873" gradientTransform="matrix(-.8158 .8158 -.8937 -.8937 599.003 165.7)" gradientUnits="userSpaceOnUse">
                                    <stop offset="0" stop-color="#fffefa"></stop>
                                    <stop offset="0.192" stop-color="#fefdf7"></stop>
                                    <stop offset="0.353" stop-color="#fdfaf0"></stop>
                                    <stop offset="0.393" stop-color="#fcf6e9"></stop>
                                    <stop offset="0.451" stop-color="#f7ead6"></stop>
                                    <stop offset="0.52" stop-color="#efd7b8"></stop>
                                    <stop offset="0.544" stop-color="#ecd0ac"></stop>
                                    <stop offset="0.797" stop-color="#714d38"></stop>
                                </radialGradient>
                                <radialGradient id="j" cx="-357.837" cy="226.244" r="36.766" fx="-352.883" fy="247.148" gradientTransform="matrix(-1.1203 0 0 -1.2159 -173.585 310.377)" gradientUnits="userSpaceOnUse">
                                    <stop offset="0" stop-color="#fffefa"></stop>
                                    <stop offset="0.132" stop-color="#fefdf7"></stop>
                                    <stop offset="0.242" stop-color="#fdfaf0"></stop>
                                    <stop offset="0.303" stop-color="#fcf6e9"></stop>
                                    <stop offset="0.392" stop-color="#f7ead6"></stop>
                                    <stop offset="0.497" stop-color="#efd7b8"></stop>
                                    <stop offset="0.532" stop-color="#ecd0ac"></stop>
                                    <stop offset="0.677" stop-color="#835d48"></stop>
                                    <stop offset="0.95" stop-color="#8c5c3d"></stop>
                                </radialGradient>
                                <radialGradient id="k" cx="-333.529" cy="415.262" r="41.056" fx="-340.736" fy="440.547" gradientTransform="matrix(-1.2082 -.2093 .2174 -1.2545 -158.298 521.438)" gradientUnits="userSpaceOnUse">
                                    <stop offset="0.031" stop-color="#fffefa"></stop>
                                    <stop offset="0.095" stop-color="#fcf9f3"></stop>
                                    <stop offset="0.188" stop-color="#f4eadf"></stop>
                                    <stop offset="0.3" stop-color="#e7d4bf"></stop>
                                    <stop offset="0.425" stop-color="#d6b594"></stop>
                                    <stop offset="0.44" stop-color="#d4b18e"></stop>
                                    <stop offset="0.57" stop-color="#d7b694"></stop>
                                    <stop offset="0.747" stop-color="#6d422f"></stop>
                                </radialGradient>
                                <radialGradient id="l" cx="-277.091" cy="427.103" r="41.094" fx="-287.076" fy="451.452" gradientTransform="matrix(-1.1863 -.2055 .2055 -1.1863 6.443 599.36)" gradientUnits="userSpaceOnUse">
                                    <stop offset="0.044" stop-color="#fdf6e0"></stop>
                                    <stop offset="0.112" stop-color="#fbf1d9"></stop>
                                    <stop offset="0.211" stop-color="#f4e3c5"></stop>
                                    <stop offset="0.329" stop-color="#eacea5"></stop>
                                    <stop offset="0.389" stop-color="#e4c092"></stop>
                                    <stop offset="0.632" stop-color="#8c5c3d"></stop>
                                    <stop offset="0.67" stop-color="#372623"></stop>
                                </radialGradient>
                                <path fill="url(#a)" stroke="url(#b)" stroke-miterlimit="10" d="M416.4 119.7s-20.2 1.8-24 26.7c0 0 0 13 5.9 21.6l2.2 3.1s1 1.4-.6 5.1l-73.7 171.2-2.4 4.1s-2.6 4.1-9.6 1.4c0 0-6.1-2.4-4.7-13.4l20.2-146.6 13-87.7s.7-3.4 3.4-4.2c.7-.2 1.4-.5 2.1-1 4.3-2.6 16.9-11.8 17.5-27.7 0 0 3-16.9-11.6-27.5-10.4-7.6-24.4-8.5-35.4-1.9-6.4 3.8-12.3 10.4-13.7 22 0 0-3.1 13.2 4.5 24.4 0 0 5.3 6.3 6.7 7.3 0 0 1.6 1.4 1.2 3.1l-44.2 207.6s-3.1 12.6-13.4 12.8c0 0-7.1 1.4-8.5-10.6l-6.1-129.9-5.5-112.1s.6-5.5 4.7-7.9c0 0 15.5-11.8 10.8-30.7 0 0-4.7-29.3-37.9-23.4 0 0-24.6 7.3-17.5 40.7 0 0 2.4 9.4 11.4 14.9 0 0 5.5 2.4 5.5 9.6L208.2 307s.8 13.8-12.2 14.7c0 0-7.7.8-12.4-23.2L138.1 105s-2.5-11.2 3-16.1c0 0 17.6-22.9-2.4-44.4 0 0-16.7-16.3-38.7-1.2 0 0-15.7 9.8-9.4 35.6 0 0 1.5 10.7 15.2 18.1 0 0 7.9 2.6 8.5 9.5l27.9 186.1s5.7 42.5 4.3 50.9c0 0 .8 7.5-7.3 9.8 0 0-6.1 1.4-12.8-15.5L57.3 179.9s-4.3-10.8 0-15.7c0 0 16.3-26.1-8.6-41.3 0 0-17.9-12.2-36.2 3.7 0 0-20.2 18.3 0 41.3 0 0 4.7 6.3 16.1 9.2 0 0 6.7.2 7.7 7.5l58.6 170.2 32.6 95.5s3.2 11.6 5.1 13.2c0 0 5.3 5.7 23.2 11.4 0 0 41.9 20.8 94.9 14.4 0 0 35.2-3.3 67.4-18.7l5.1-2.9s2.6-1 4.7-9.4l33-98.1 35.8-100.3 21-61.5 4.3-10.6s2.4-6.5 9.6-8.1c0 0 22.2-4.1 22-31.3.2 0-1.6-33.2-37.2-28.7zm-160 335.8s-55.4 9.2-87.3-11.2c0 0-15.1-7.9-10.2-27.7 0 0 3.6-9.3 17.3-14.2 0 0 22.4-13 78-7.7 0 0 44.6 5.1 44.8 28.5.1.1 7.9 24.6-42.6 32.3z"></path>
                                <path fill="url(#c)" stroke="url(#d)" stroke-miterlimit="10" d="M417.23 117.913s-20.2 1.8-24 26.7c0 0 0 13 5.9 21.6l2.2 3.1s1 1.4-.6 5.1l-73.7 171.2-2.4 4.1s-2.6 4.1-9.6 1.4c0 0-6.1-2.4-4.7-13.4l20.2-146.6 13-87.7s.7-3.4 3.4-4.2c.7-.2 3-1.6 3.7-2 4.3-2.6 15.4-10.8 15.9-26.7 0 0 3-16.9-11.6-27.5-10.4-7.6-24.4-8.5-35.4-1.9-6.4 3.8-12.3 10.4-13.7 22 0 0-3.1 13.2 4.5 24.4 0 0 5.3 6.3 6.7 7.3 0 0 1.6 1.4 1.2 3.1l-44.2 207.6s-3.1 12.6-13.4 12.8c0 0-7.1 1.4-8.5-10.6l-6.1-129.9-5.5-112.1s.6-5.5 4.7-7.9c0 0 15.5-11.8 10.8-30.7 0 0-3.8-28.3-37-22.4 0 0-24.7 6.2-17.6 39.6 0 0 3.4 6.8 11.3 13.6 0 0 4.8 3.8 4.8 11.1l-8.5 236.3s.8 13.8-12.2 14.7c0 0-7.7.8-12.4-23.2l-45.5-193.6s-2.5-11.2 3-16.1c0 0 17.6-22.9-2.4-44.4 0 0-16.7-16.3-38.7-1.2 0 0-15.7 9.8-9.4 35.6 0 0 1.5 10.7 15.2 18.1 0 0 7.9 2.6 8.5 9.5l27.9 186.1s5.7 42.5 4.3 50.9c0 0 .8 7.5-7.3 9.8 0 0-6.1 1.4-12.8-15.5l-69.1-157.9s-4.3-10.8 0-15.7c0 0 16.3-26.1-8.6-41.3 0 0-17.9-12.2-36.2 3.7 0 0-20.2 18.3 0 41.3 0 0 4.7 6.3 16.1 9.2 0 0 6.7.2 7.7 7.5l58.6 170.2 32.6 95.5s3.2 11.6 5.1 13.2c0 0 5.3 5.7 23.2 11.4 0 0 41.9 20.8 94.9 14.4 0 0 35.2-3.3 67.4-18.7l5.1-2.9s2.6-1 4.7-9.4l33-98.1 35.8-100.3 21-61.5 4.3-10.6s2.4-6.5 9.6-8.1c0 0 22.2-4.1 22-31.3.2 0-1.6-33.2-37.2-28.7zm-160 335.8s-55.4 9.2-87.3-11.2c0 0-15.1-7.9-10.2-27.7 0 0 3.6-9.3 17.3-14.2 0 0 22.4-13 78-7.7 0 0 44.6 5.1 44.8 28.5.1.1 7.9 24.6-42.6 32.3z"></path>
                                <path fill="url(#e)" stroke="url(#f)" stroke-miterlimit="10" d="M416.4 119.7s-20.2 1.8-24 26.7c0 0 0 13 5.9 21.6l2.2 3.1s1 1.4-.6 5.1l-73.7 171.2-2.4 4.1s-2.6 4.1-9.6 1.4c0 0-6.1-2.4-4.7-13.4l20.2-146.6 13-87.7s.7-3.4 3.4-4.2c.7-.2 1.4-.5 2.1-1 4.3-2.6 16.9-11.8 17.5-27.7 0 0 3-16.9-11.6-27.5-10.4-7.6-24.4-8.5-35.4-1.9-6.4 3.8-12.3 10.4-13.7 22 0 0-3.1 13.2 4.5 24.4 0 0 5.3 6.3 6.7 7.3 0 0 1.6 1.4 1.2 3.1l-44.2 207.6s-3.1 12.6-13.4 12.8c0 0-7.1 1.4-8.5-10.6l-6.1-129.9-5.5-112.1s.6-5.5 4.7-7.9c0 0 15.5-11.8 10.8-30.7 0 0-4.7-29.3-37.9-23.4 0 0-24.6 7.3-17.5 40.7 0 0 2.4 9.4 11.4 14.9 0 0 5.5 2.4 5.5 9.6L208.2 307s.8 13.8-12.2 14.7c0 0-7.7.8-12.4-23.2L138.1 105s-2.5-11.2 3-16.1c0 0 17.6-22.9-2.4-44.4 0 0-16.7-16.3-38.7-1.2 0 0-15.7 9.8-9.4 35.6 0 0 1.5 10.7 15.2 18.1 0 0 7.9 2.6 8.5 9.5l27.9 186.1s5.7 42.5 4.3 50.9c0 0 .8 7.5-7.3 9.8 0 0-6.1 1.4-12.8-15.5L57.3 179.9s-4.3-10.8 0-15.7c0 0 16.3-26.1-8.6-41.3 0 0-17.9-12.2-36.2 3.7 0 0-20.2 18.3 0 41.3 0 0 4.7 6.3 16.1 9.2 0 0 6.7.2 7.7 7.5l58.6 170.2 32.6 95.5s3.2 11.6 5.1 13.2c0 0 5.3 5.7 23.2 11.4 0 0 41.9 20.8 94.9 14.4 0 0 35.2-3.3 67.4-18.7l5.1-2.9s2.6-1 4.7-9.4l33-98.1 35.8-100.3 21-61.5 4.3-10.6s2.4-6.5 9.6-8.1c0 0 22.2-4.1 22-31.3.2 0-1.6-33.2-37.2-28.7zm-160 335.8s-55.4 9.2-87.3-11.2c0 0-15.1-7.9-10.2-27.7 0 0 3.6-9.3 17.3-14.2 0 0 22.4-13 78-7.7 0 0 44.6 5.1 44.8 28.5.1.1 7.9 24.6-42.6 32.3z"></path>
                                <path fill="url(#g)" stroke="url(#f)" stroke-miterlimit="10" d="M416.4 119.7s-20.2 1.8-24 26.7c0 0 0 13 5.9 21.6l2.2 3.1s1 1.4-.6 5.1l-73.7 171.2-2.4 4.1s-2.6 4.1-9.6 1.4c0 0-6.1-2.4-4.7-13.4l20.2-146.6 13-87.7s.7-3.4 3.4-4.2c.7-.2 1.4-.5 2.1-1 4.3-2.6 16.9-11.8 17.5-27.7 0 0 3-16.9-11.6-27.5-10.4-7.6-24.4-8.5-35.4-1.9-6.4 3.8-12.3 10.4-13.7 22 0 0-3.1 13.2 4.5 24.4 0 0 5.3 6.3 6.7 7.3 0 0 1.6 1.4 1.2 3.1l-44.2 207.6s-3.1 12.6-13.4 12.8c0 0-7.1 1.4-8.5-10.6l-6.1-129.9-5.5-112.1s.6-5.5 4.7-7.9c0 0 15.5-11.8 10.8-30.7 0 0-4.7-29.3-37.9-23.4 0 0-24.6 7.3-17.5 40.7 0 0 2.4 9.4 11.4 14.9 0 0 5.5 2.4 5.5 9.6L208.2 307s.8 13.8-12.2 14.7c0 0-7.7.8-12.4-23.2L138.1 105s-2.5-11.2 3-16.1c0 0 17.6-22.9-2.4-44.4 0 0-16.7-16.3-38.7-1.2 0 0-15.7 9.8-9.4 35.6 0 0 1.5 10.7 15.2 18.1 0 0 7.9 2.6 8.5 9.5l27.9 186.1s5.7 42.5 4.3 50.9c0 0 .8 7.5-7.3 9.8 0 0-6.1 1.4-12.8-15.5L57.3 179.9s-4.3-10.8 0-15.7c0 0 16.3-26.1-8.6-41.3 0 0-17.9-12.2-36.2 3.7 0 0-20.2 18.3 0 41.3 0 0 4.7 6.3 16.1 9.2 0 0 6.7.2 7.7 7.5l58.6 170.2 32.6 95.5s3.2 11.6 5.1 13.2c0 0 5.3 5.7 23.2 11.4 0 0 41.9 20.8 94.9 14.4 0 0 35.2-3.3 67.4-18.7l5.1-2.9s2.6-1 4.7-9.4l33-98.1 35.8-100.3 21-61.5 4.3-10.6s2.4-6.5 9.6-8.1c0 0 22.2-4.1 22-31.3.2 0-1.6-33.2-37.2-28.7zm-160 335.8s-55.4 9.2-87.3-11.2c0 0-15.1-7.9-10.2-27.7 0 0 3.6-9.3 17.3-14.2 0 0 23.474-14.622 79.202-8.184 0 0 43.398 5.584 43.598 28.984.1.1 7.9 24.6-42.6 32.3z"></path>
                                <circle cx="30.8" cy="146.5" r="26.8" fill="url(#h)"></circle>
                                <path fill="url(#i)" d="M99.1 90.2C86.5 78.1 86.6 56.9 98 45.8c11.2-10.9 29.8-10.2 41.9 1.9s14.7 26.9 1.9 41.9c-10.2 11.8-30.4 12.4-42.7.6z"></path>
                                <path fill="url(#j)" d="M199.2 34.7c0-16.5 12.9-29.7 28.1-29.7s28.1 13.5 28.1 30-7.9 30.7-28.1 30.7c-15.2-.1-28.1-13.3-28.1-31z"></path>
                                <path fill="url(#k)" d="M304.8 65.1c3-17.3 18.9-29 35.6-26.1 16.6 2.9 27.7 19.2 24.7 36.5s-17.2 29.3-35.6 26.1c-16.6-3-27.9-17.8-24.7-36.5z"></path>
                                <path fill="url(#l)" d="M393.3 144.5c.4-16.7 18.5-27.4 34.9-24.6s27.4 18.5 24.6 34.9-14.5 28.1-34.9 24.6c-16.4-2.7-25-14-24.6-34.9z"></path>
                                <g fill="#140a06">
                                    <path d="M133.6 354.8s-11.4-21.5-17.5-37l-27.3-61.5L64 197.8s-10-21.4-12.1-28.9c0 0-1.3-4.9 2.5-12.1 0 0 9.1-12.4 3.1-20.9 0 0 1.6 6.2-2.8 12.8 0 0-7.2 11.2-7.5 15.5 0 0-.4 7.1 5.3 15.8 0 0 7.1 12.2 8.6 16.2 0 0 57.9 133.4 58.2 134.2.3.7 9.1 21.3 14.3 24.4zM139.5 147.1s25.8 101.3 27.4 105.3c0 0 13.5 53.5 16.1 59.3 0 0 4.4 5.4 8.8 8 0 0-4.9-6.1-7-15.6l-16.1-68.9-21.8-86.5s-10.8-41.4-11.1-50.2c0 0-.7-4.5 2.8-10l4.6-5.9c.5-.6.9-1.2 1.2-1.9 1-1.8 3-5.5 3.7-8.5 0 0 2-14.1-6.3-14.1 0 0-.3 7.7-4.6 14.3 0 0-6.2 9.6-8.9 15.3-.9 2-1.3 4.1-1.2 6.3.2 2.8 1.5 5.8 2.4 10.8.1 0 7.9 28.9 10 42.3zM229.5 78.8l3.3 79.2 4.5 92.6L243 308c1.2 12.4 8.3 10.9 8.3 10.9-6.6-2.8-6-22.7-6-22.7l-5.9-109.7-6-120c0-1 0-1.9.2-2.9 1.1-6.1 3.3-8.4 3.3-8.4 6-10.6 10.9-11.1 12.5-10.9 1.1.1 4.8.7 5.4-.3 1.1-1.7 1.5-8.2 1.5-8.2-1.4-6.3-5.9-7.8-5.9-7.8.4 1.4-5.9 8.5-5.9 8.5l-12 13.8c-3.3 4.3-3.1 10-3.1 10z"></path>
                                    <path d="M239.3 66c-.4.6-.6 1.2-.8 1.9-.3 1.6-.9 4.9-.6 7.5l5.5 119.9 6.3 118.3s.7 4.5 6.7 6.2c0 0-5.9-2.6-5.3-16l-5.2-116.2L240.2 76s-1.1-7.4 1.3-13.3zM314.2 353.1s-4.9-2.9-4.9-10.5l6.1-84.9 12.8-95.5 7.1-59.8s-.7-5.2 3.9-9.4c.6-.6 3.7-4.5 4.2-5.1 1.7-2.3 4.9-3.5 9.7-7.6l6.9-4.6c1.5-.7 3.9 2.8 3.9 1.2.1-3.1-1.1-7.3-3.3-10.2L357 61s-11.1 8.2-14.2 10.6c0 0-12.4 12-15.3 22.9 0 0-2 12.2-2.7 20.2l-13.5 102.1S295.4 323.5 299 344.2c0 0 3.2 16.7 15.2 8.9z"></path>
                                    <path d="M447 142.3s-4.9-7-11.4-9c-1-.3-2.1 0-2.8.6-1.7 1.4-4.7 3.9-6.8 5.6-.8.6-1.7 1.2-2.6 1.7-2.8 1.4-10.8 6.3-17.5 17.9-.4.6-.6 1.3-.7 2.1-.2 2.2-.7 7.1-.8 9.7 0 .7 0 1.3.2 2 .3 1.2.6 4.1-1.3 7.6l-44.4 104.8-26.9 65s-7.3 17.8-21.3 30c0 0-5.6 4.7-20.9 1.8 0 0-60.4-9.5-92.6-4.9 0 0-34.6 2.4-44.2 26.6 0 0-6.4 13.1-1.6 32.2 0 0 3.3 16.4 2.4 22.4 0 0 3.3 7.3 9.1 10.4l2.2 1.8s-15.3-.7-33.5-14.4c0 0 6.4 9.8 22 14.2 0 0 24 9.3 37.7 11.5 0 0-26.9-12-31.8-20.9 0 0 0-2.2 2.9-1.6 0 0 9.5 4.5 45.5 5 0 0 34.9.6 59.6-6.9 0 0 34.8-7.8 40.4-34 0 0 9.8-36.6 19.3-52 0 0 24.2-52.2 32.9-74.8l34.9-87.4s10.2-27 11.1-29c0 0 2.9-11.5 7.5-17.8 0 0 6.3-8.8 10.5-12.4 1.1-.9 2.3-1.6 3.7-1.8 1.6-.3 4.2-.6 6.4.5 0 0 11.5 4.7 15.8 4.2.1.1 2.6-2.3-3-10.7zM301.4 425.5s.5 14.7-20.3 23.3c0 0-20.9 14.3-77.3 8.7 0 0-41.7.2-47.6-21.5 0 0-4.054-13.133 5.25-28.42 0 0 12.113-15.76 54.313-17.56 0 0 52.294-2.525 77.395 15.775 0-.001 10.058 7.397 8.242 19.705z"></path>
                                    <path d="M291.2 404.1c-9.1-7.1-18.124-11.522-18.124-11.522-30.9-6-60.837-4.316-60.837-4.316C167.339 391.362 159 410.9 159 410.9l.774-5.51c-3.402 1.686-2.416 13.034-1.263 14.712 1.426-3.967.705-5.328 4.329-8.875 6.625-6.484 11.734-7.626 14.795-8.919 6.878-2.905 14.116-4.767 20.569-5.961 11.525-2.132 20.547-2.132 20.547-2.132 20.134-.483 31.591.574 37.116 1.302 2.827.372 12.068 2.64 13.256 2.977 36.093 10.233 29.907 28.93 29.907 28.93 3.721-17.952-7.83-23.324-7.83-23.324z"></path>
                                </g>
                                <path fill="#7b4f36" d="M8.8 163.6s4.4 7.7 13.8 11.4c0 0 3.7 1.5 7.3 2.4 0 0 4.1.5 6 3.6l16.5 46.4 23.5 67.9 46 133.6 8.4 24.1 2.1 6.6s1.1 3.5 3.6 4.6c0 0 16.1 10.7 41.7 17.3 0 0 18.6 7.4 50.6 8.6 0 0 36.1 1.1 60.2-9 0 0 17.7-6.7 25.6-11.1 0 0-6.3 6-34.2 15.5 0 0-31 9.4-67.3 5.9 0 0-41.1-4.8-77.7-24.7 0 0-2.9-.5-5.8-10.1L114 411.9l-14.3-42.7L76 300.5l-20.9-61.3-19.1-55s-1.4-4.6-5.5-4.9c-.4 0-.7-.1-1.1-.1-3-.8-17.2-4.8-20.6-15.6z"></path>
                                <path fill="#684c34" d="M190.4 479.8s59.3 13.6 114.1-11.1l9.5-4.2s-18.1 16.4-72.6 21.2c-.1 0-31.2 1.4-51-5.9z"></path>
                                <path fill="#79593a" d="M150.9 420.9s2.1-18.3 10.1-25.7c0 0 7.3-10.7 43.3-14.9 0 0 40.7-5.1 78.3 8.6 0 0 11.9 4.5 16.9 14.8 0 0-7.8-17.6-57.2-21 0 0-27.4-2.1-52.4 3-3.5.7-6.9 1.5-10.4 2.2-5.586 2.002-24.1 5.6-28.6 33z"></path>
                            </svg>
                    <h2 style="margin: 20px 0 2px; font-size: 14px; font-weight: normal; letter-spacing: 1px; text-align: center; color: #757575; font-family: 'Montserrat', sans-serif;">Rolex İzmir İstinyepark</h2>
                    <p style="margin: 5px 0 0; font-size: 12px; color: #666; text-align: center; font-family: 'Montserrat', sans-serif; text-transform: capitalize;">${staffName}</p>
                </div>

                <div class="success-container">
                    <div class="success-icon">✓</div>
                    <div class="success-title">Randevunuz Oluşturuldu</div>
                    <p class="success-text">
                        Sizi mağazamızda ağırlamayı sabırsızlıkla bekliyoruz.
                    </p>

                    <div class="appointment-details">
                        <div class="details-header">Randevu Bilgileriniz</div>
                        <div class="detail-item">${formattedDate}</div>
                        <div class="detail-item">Saat ${timeStr}</div>
                        <div class="detail-item">İlgili: ${staffName}</div>
                        ${customerNote ? `<div class="detail-item">Not: ${customerNote}</div>` : ''}
                        <div class="detail-location">Rolex İzmir İstinyepark</div>
                    </div>

                    <button class="btn-secondary" id="addToCalendarBtn">Takvime Ekle</button>
                </div>
            `;

            // Event listener'ı HTML eklendikten SONRA ekle
            setTimeout(() => {
                const calendarBtn = document.getElementById('addToCalendarBtn');
                if (calendarBtn) {
                    console.log('Takvime Ekle butonu bulundu, event listener ekleniyor...');
                    calendarBtn.addEventListener('click', addToCalendar);
                } else {
                    console.error('Takvime Ekle butonu bulunamadı!');
                }
            }, 100);
        }

        // Takvime ekleme - Modal aç
        function addToCalendar() {
            openCalendarModal();
        }

        // Modal açma/kapama fonksiyonları
        function openCalendarModal() {
            document.getElementById('calendarModal').classList.add('active');
        }

        function closeCalendarModal() {
            document.getElementById('calendarModal').classList.remove('active');
        }

        // Apple Calendar için ICS indirme (Safari detection ile)
        function addToCalendarApple() {
            if (!lastAppointmentData) {
                alert('Randevu bilgileri bulunamadı. Lütfen tekrar deneyin.');
                closeCalendarModal();
                return;
            }

            const platform = detectPlatform();
            const date = new Date(lastAppointmentData.date + 'T' + lastAppointmentData.time);
            const duration = lastAppointmentData.duration || CONFIG.APPOINTMENT_HOURS.interval || 60;
            const endDate = new Date(date.getTime() + duration * 60000);
            const icsContent = generateICS(date, endDate);

            // Safari + Apple cihazında data URL ile Calendar app'i direkt aç
            if ((platform.ios || platform.macos) && platform.safari) {
                const base64 = btoa(unescape(encodeURIComponent(icsContent)));
                const dataUrl = `data:text/calendar;base64,${base64}`;
                window.location.href = dataUrl;
                closeCalendarModal();
                showToast('Apple Calendar açılıyor...', 'success');
            } else {
                // Diğer tarayıcılarda Blob download (dosya adı garantili)
                const blob = new Blob([icsContent], { type: 'text/calendar;charset=utf-8' });
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = 'rolex-randevu.ics';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                URL.revokeObjectURL(url);
                closeCalendarModal();
                showToast('ICS dosyası indirildi', 'success');
            }
        }

        // Webcal Protokolü (Apple Safari için en iyi yöntem)
        function useWebcalProtocol() {
            console.log('useWebcalProtocol fonksiyonu çağrıldı');
            const date = new Date(lastAppointmentData.date + 'T' + lastAppointmentData.time);
            const duration = lastAppointmentData.duration || CONFIG.APPOINTMENT_HOURS.interval || 60;
            const endDate = new Date(date.getTime() + duration * 60000);

            console.log('Tarih:', date, 'Bitiş:', endDate);

            const icsContent = generateICS(date, endDate);
            const base64 = btoa(unescape(encodeURIComponent(icsContent)));
            const dataUrl = `data:text/calendar;base64,${base64}`;

            console.log('ICS içeriği oluşturuldu, takvim açılıyor...');

            // Safari'de Calendar app'i açar
            window.location.href = dataUrl;

            showToast('Calendar uygulaması açılıyor...', 'success');

            // Fallback: 3 saniye sonra çalışmadıysa ICS indir
            setTimeout(() => {
                if (document.hasFocus()) {
                    console.log('Webcal çalışmadı, ICS indiriliyor');
                    downloadICSForApple('fallback');
                }
            }, 3000);
        }

        // iOS Rehber Modalı
        function showIOSGuide() {
            const modal = document.getElementById('guideModal');
            if (modal) {
                modal.classList.add('active');
            }
        }

        function closeGuide() {
            const modal = document.getElementById('guideModal');
            if (modal) {
                modal.classList.remove('active');
            }
        }

        // ==================== YARDIMCI FONKSİYONLAR ====================

        // Gelişmiş Platform ve Tarayıcı Tespiti
        function detectPlatform() {
            const ua = navigator.userAgent;
            const platform = navigator.platform || '';

            const detection = {
                // Operating System
                ios: /iPhone|iPad|iPod/.test(ua) && !window.MSStream,
                android: /Android/.test(ua),
                macos: /Mac/.test(platform) && !/iPhone|iPad|iPod/.test(ua),
                windows: /Win/.test(platform),

                // Browser
                safari: /Safari/.test(ua) && !/Chrome|CriOS/.test(ua),
                chrome: /Chrome|CriOS/.test(ua),
                firefox: /Firefox|FxiOS/.test(ua),
                edge: /Edg/.test(ua),

                // Mobile
                mobile: /iPhone|iPad|iPod|Android/.test(ua)
            };

            return detection;
        }

        // Toast bildirim göster
        function showToast(message, type = 'success') {
            const existing = document.querySelector('.toast');
            if (existing) existing.remove();

            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.innerHTML = `<span>${message}</span>`;
            document.body.appendChild(toast);

            setTimeout(() => {
                toast.classList.add('fade-out');
                setTimeout(() => toast.remove(), 500);
            }, 3000);
        }

        // ==================== TAKVİME EKLEME FONKSİYONLARI ====================

        // Apple cihazlar için ICS İndirme
        function downloadICSForApple(platformType) {
            console.log('downloadICSForApple fonksiyonu çağrıldı, platform:', platformType);
            const date = new Date(lastAppointmentData.date + 'T' + lastAppointmentData.time);
            const duration = lastAppointmentData.duration || CONFIG.APPOINTMENT_HOURS.interval || 60;
            const endDate = new Date(date.getTime() + duration * 60000);

            const icsContent = generateICS(date, endDate);
            const blob = new Blob([icsContent], { type: 'text/calendar;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');

            link.href = url;
            link.download = 'rolex-randevu.ics';
            link.style.display = 'none';

            if (platformType === 'ios') {
                link.setAttribute('target', '_blank');
                link.setAttribute('rel', 'noopener');
            }

            console.log('ICS dosyası indiriliyor...');
            document.body.appendChild(link);
            link.click();

            if (platformType === 'ios') {
                setTimeout(() => showIOSGuide(), 1500);
            } else {
                showToast('ICS dosyası indirildi', 'success');
            }

            setTimeout(() => {
                document.body.removeChild(link);
                URL.revokeObjectURL(url);
            }, 100);
        }

        // Google Calendar
        function addToCalendarGoogle() {
            console.log('addToCalendarGoogle fonksiyonu çağrıldı');
            if (!lastAppointmentData) {
                alert('Randevu bilgileri bulunamadı. Lütfen tekrar deneyin.');
                return;
            }

            const date = new Date(lastAppointmentData.date + 'T' + lastAppointmentData.time);
            const duration = lastAppointmentData.duration || CONFIG.APPOINTMENT_HOURS.interval || 60;
            const endDate = new Date(date.getTime() + duration * 60000);

            console.log('Google Calendar için tarih hazırlanıyor...');

            const formatDateForGoogle = (d) => {
                return d.toISOString().replace(/[-:]/g, '').split('.')[0] + 'Z';
            };

            const startTime = formatDateForGoogle(date);
            const endTime = formatDateForGoogle(endDate);

            // Detaylı randevu bilgileri oluştur
            let details = 'RANDEVU BİLGİLERİ\n\n';
            details += `Müşteri: ${lastAppointmentData.customerName}\n`;
            details += `İletişim: ${lastAppointmentData.customerPhone}\n`;
            if (lastAppointmentData.customerEmail) {
                details += `E-posta: ${lastAppointmentData.customerEmail}\n`;
            }

            // Tarih formatla
            const appointmentDate = new Date(lastAppointmentData.date);
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            const formattedDate = appointmentDate.toLocaleDateString('tr-TR', options);

            details += `Tarih: ${formattedDate}\n`;
            details += `Saat: ${lastAppointmentData.time}\n`;

            // Randevu türü
            const appointmentTypeName = CONFIG.APPOINTMENT_TYPES?.find(t => t.value === lastAppointmentData.appointmentType)?.name || 'Genel';
            details += `Konu: ${appointmentTypeName}\n`;
            details += `İlgili: ${lastAppointmentData.staffName}\n`;

            if (lastAppointmentData.customerNote) {
                details += `Ek Bilgi: ${lastAppointmentData.customerNote}\n`;
            }

            // Google Calendar web URL (mobil cihazlarda app'i açar eğer kuruluysa)
            const eventTitle = `${lastAppointmentData.customerName} - ${lastAppointmentData.staffName}`;
            const calendarUrl = `https://calendar.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent(eventTitle)}&dates=${startTime}/${endTime}&details=${encodeURIComponent(details)}&location=${encodeURIComponent('Rolex İzmir İstinyepark')}`;

            console.log('Google Calendar URL oluşturuldu:', calendarUrl);
            window.open(calendarUrl, '_blank');
            closeCalendarModal();
            showToast('Google Calendar açıldı', 'success');
        }

        // Outlook Calendar
        function addToCalendarOutlook() {
            if (!lastAppointmentData) {
                alert('Randevu bilgileri bulunamadı. Lütfen tekrar deneyin.');
                return;
            }

            const date = new Date(lastAppointmentData.date + 'T' + lastAppointmentData.time);
            const duration = lastAppointmentData.duration || CONFIG.APPOINTMENT_HOURS.interval || 60;
            const endDate = new Date(date.getTime() + duration * 60000);

            // Detaylı randevu bilgileri oluştur
            let details = 'RANDEVU BİLGİLERİ<br><br>';
            details += `Müşteri: ${lastAppointmentData.customerName}<br>`;
            details += `İletişim: ${lastAppointmentData.customerPhone}<br>`;
            if (lastAppointmentData.customerEmail) {
                details += `E-posta: ${lastAppointmentData.customerEmail}<br>`;
            }
            details += `Tarih: ${lastAppointmentData.date}<br>`;
            details += `Saat: ${lastAppointmentData.time}<br>`;

            const appointmentTypeName = CONFIG.APPOINTMENT_TYPES?.find(t => t.value === lastAppointmentData.appointmentType)?.name || 'Genel';
            details += `Konu: ${appointmentTypeName}<br>`;
            details += `İlgili: ${lastAppointmentData.staffName}<br>`;

            if (lastAppointmentData.customerNote) {
                details += `Ek Bilgi: ${lastAppointmentData.customerNote}<br>`;
            }

            const eventTitle = `${lastAppointmentData.customerName} - ${lastAppointmentData.staffName}`;

            const outlookUrl = new URL('https://outlook.live.com/calendar/0/deeplink/compose');
            outlookUrl.searchParams.append('path', '/calendar/action/compose');
            outlookUrl.searchParams.append('rru', 'addevent');
            outlookUrl.searchParams.append('startdt', date.toISOString());
            outlookUrl.searchParams.append('enddt', endDate.toISOString());
            outlookUrl.searchParams.append('subject', eventTitle);
            outlookUrl.searchParams.append('location', 'Rolex İzmir İstinyepark');
            outlookUrl.searchParams.append('body', details);

            window.open(outlookUrl.toString(), '_blank');
            closeCalendarModal();
            showToast('Outlook Calendar açıldı', 'success');
        }

        // Universal ICS Dosya İndirme (Herhangi bir takvim uygulaması için)
        function downloadICSUniversal() {
            if (!lastAppointmentData) {
                alert('Randevu bilgileri bulunamadı. Lütfen tekrar deneyin.');
                closeCalendarModal();
                return;
            }

            const date = new Date(lastAppointmentData.date + 'T' + lastAppointmentData.time);
            const duration = lastAppointmentData.duration || CONFIG.APPOINTMENT_HOURS.interval || 60;
            const endDate = new Date(date.getTime() + duration * 60000);
            const icsContent = generateICS(date, endDate);

            const blob = new Blob([icsContent], { type: 'text/calendar;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'rolex-randevu.ics';
            document.body.appendChild(link);
            link.click();

            setTimeout(() => {
                document.body.removeChild(link);
                URL.revokeObjectURL(url);
                closeCalendarModal();
                showToast('Takvim dosyası (.ics) indirildi', 'success');
            }, 100);
        }

        // ICS Dosya İndirme (Universal)
        function downloadICSFile() {
            console.log('downloadICSFile fonksiyonu çağrıldı');
            if (!lastAppointmentData) {
                alert('Randevu bilgileri bulunamadı. Lütfen tekrar deneyin.');
                return;
            }

            const date = new Date(lastAppointmentData.date + 'T' + lastAppointmentData.time);
            const duration = lastAppointmentData.duration || CONFIG.APPOINTMENT_HOURS.interval || 60;
            const endDate = new Date(date.getTime() + duration * 60000);
            const icsContent = generateICS(date, endDate);

            console.log('ICS dosyası oluşturuluyor...');
            const blob = new Blob([icsContent], { type: 'text/calendar;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'rolex-randevu.ics';
            document.body.appendChild(link);
            link.click();
            console.log('ICS dosyası indirme başlatıldı');

            setTimeout(() => {
                document.body.removeChild(link);
                URL.revokeObjectURL(url);
                showToast('Takvim dosyası (.ics) indirildi', 'success');
            }, 100);
        }

        function generateICS(startDate, endDate) {
            // İyileştirilmiş format fonksiyonu - TZID desteğiyle
            const formatICSDate = (d) => {
                const year = d.getFullYear();
                const month = String(d.getMonth() + 1).padStart(2, '0');
                const day = String(d.getDate()).padStart(2, '0');
                const hours = String(d.getHours()).padStart(2, '0');
                const minutes = String(d.getMinutes()).padStart(2, '0');
                const seconds = String(d.getSeconds()).padStart(2, '0');
                return `${year}${month}${day}T${hours}${minutes}${seconds}`;
            };

            // Detaylı randevu bilgileri oluştur
            let description = 'RANDEVU BİLGİLERİ\\n\\n';
            let summary = 'Rolex Randevu';
            let alarmTrigger = '-PT30M'; // Default

            if (lastAppointmentData) {
                // Müşteri takvimi için özel isimler
                const customerAppointmentTypeNames = {
                    'delivery': 'Saat Takdimi',
                    'consultation': 'Genel Görüşme'
                };

                // Müşteri takvimi için randevu türü adı
                const appointmentTypeName = customerAppointmentTypeNames[lastAppointmentData.appointmentType] ||
                    CONFIG.APPOINTMENT_TYPES?.find(t => t.value === lastAppointmentData.appointmentType)?.name || 'Genel';

                // Müşteri takvimi için başlık: İzmir İstinyepark Rolex - İlgili (Görüşme Türü)
                summary = `İzmir İstinyepark Rolex - ${lastAppointmentData.staffName} (${appointmentTypeName})`;

                // Tarih objesi oluştur
                const appointmentDate = new Date(lastAppointmentData.date);

                // Randevu günü sabah 10:00 Türkiye saati için alarm hesapla
                // Türkiye UTC+3 olduğu için 10:00 local = 07:00 UTC
                const year = appointmentDate.getFullYear();
                const month = String(appointmentDate.getMonth() + 1).padStart(2, '0');
                const day = String(appointmentDate.getDate()).padStart(2, '0');
                alarmTrigger = `VALUE=DATE-TIME:${year}${month}${day}T070000Z`;

                // Yeni sıralama: İlgili, İletişim, E-posta, Tarih, Saat, Konu, Ek Bilgi
                description += `İlgili: ${lastAppointmentData.staffName}\\n`;
                description += `İletişim: ${lastAppointmentData.staffPhone || 'Belirtilmedi'}\\n`;
                description += `E-posta: ${lastAppointmentData.staffEmail || 'Belirtilmedi'}\\n`;

                // Tarih formatla
                const options = { year: 'numeric', month: 'long', day: 'numeric' };
                const formattedDate = appointmentDate.toLocaleDateString('tr-TR', options);

                description += `Tarih: ${formattedDate}\\n`;
                description += `Saat: ${lastAppointmentData.time}\\n`;
                description += `Konu: ${appointmentTypeName}\\n`;

                if (lastAppointmentData.customerNote) {
                    description += `Ek Bilgi: ${lastAppointmentData.customerNote}\\n`;
                }

                description += `\\nRandevunuza zamanında gelmenizi rica ederiz.\\nLütfen kimlik belgenizi yanınızda bulundurun.`;
            } else {
                description = 'Randevunuz onaylandı';
            }

            // ICS içeriği - VTIMEZONE tanımı ile
            return [
                'BEGIN:VCALENDAR',
                'VERSION:2.0',
                'PRODID:-//Rolex İzmir İstinyepark//Randevu Sistemi//TR',
                'CALSCALE:GREGORIAN',
                'METHOD:PUBLISH',
                'BEGIN:VTIMEZONE',
                'TZID:Europe/Istanbul',
                'BEGIN:STANDARD',
                'DTSTART:19701025T040000',
                'RRULE:FREQ=YEARLY;BYDAY=-1SU;BYMONTH=10',
                'TZOFFSETFROM:+0300',
                'TZOFFSETTO:+0300',
                'TZNAME:+03',
                'END:STANDARD',
                'END:VTIMEZONE',
                'BEGIN:VEVENT',
                `UID:rolex-${Date.now()}@istinyepark.com`,
                `DTSTAMP:${formatICSDate(new Date())}Z`,
                `DTSTART;TZID=Europe/Istanbul:${formatICSDate(startDate)}`,
                `DTEND;TZID=Europe/Istanbul:${formatICSDate(endDate)}`,
                `SUMMARY:${summary}`,
                `DESCRIPTION:${description}`,
                'LOCATION:Rolex İzmir İstinyepark',
                'STATUS:CONFIRMED',
                'ORGANIZER;CN=Rolex İzmir İstinyepark:mailto:istinyeparkrolex35@gmail.com',
                'BEGIN:VALARM',
                `TRIGGER;${alarmTrigger}`,
                'ACTION:DISPLAY',
                'DESCRIPTION:Randevunuza zamanında gelmenizi rica ederiz. Lütfen kimlik belgenizi yanınızda bulundurun.',
                'END:VALARM',
                'END:VEVENT',
                'END:VCALENDAR'
            ].join('\r\n');
        }
    </script>

    <!-- Calendar Selection Modal -->
    <div id="calendarModal" class="calendar-modal">
        <div class="calendar-modal-content">
            <div class="calendar-modal-header">Takvim Seçin</div>
            <div class="calendar-modal-subtitle">Randevunuzu hangi takvime eklemek istersiniz?</div>

            <div class="calendar-options">
                <button class="calendar-option-btn" onclick="addToCalendarApple()">
                    Apple Calendar
                </button>

                <button class="calendar-option-btn" onclick="addToCalendarGoogle()">
                    Google Calendar
                </button>

                <button class="calendar-option-btn" onclick="addToCalendarOutlook()">
                    Outlook Calendar
                </button>

                <button class="calendar-option-btn" onclick="downloadICSUniversal()">
                    Takvim Dosyası İndir
                </button>
            </div>

            <button class="modal-close-btn" onclick="closeCalendarModal()">İptal</button>
        </div>
    </div>

    <!-- iOS Guide Modal -->
    <div id="guideModal" class="guide-modal">
        <div class="guide-content">
            <div class="guide-icon">📲</div>
            <h3 class="guide-title">iOS - Son Adım</h3>
            <p class="guide-text">İndirilenler'de "rolex-randevu.ics" dosyasına dokunun ve "Takvime Ekle" seçeneğini seçin</p>
            <button class="guide-btn" id="guideCloseBtn">Anladım</button>
        </div>
    </div>

    <script>
        // Guide modal event listener - sayfa yüklendiğinde ekle
        document.addEventListener('DOMContentLoaded', function() {
            const guideCloseBtn = document.getElementById('guideCloseBtn');
            if (guideCloseBtn) {
                guideCloseBtn.addEventListener('click', closeGuide);
            }
        });
    </script>
</body>
</html>
